<!DOCTYPE html><!-- this file is auto-generated from webgpu/lessons/ja/webgpu-environment-maps.md. Do not edited directly --><!--
Copyright 2023, GfxFundamentals Contributors
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

* Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the following disclaimer
  in the documentation and/or other materials provided with the
  distribution.

* Neither the name of GfxFundamentals nor the names of the
  contributors may be used to endorse or promote products derived from
  this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


--><html lang="ja"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="ç’°å¢ƒãƒãƒƒãƒ—ã®å®Ÿè£…æ–¹æ³•">
<meta name="keywords" content="webgpu graphics">
<meta name="thumbnail" content="https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-environment-maps_ja.jpg">

<meta property="og:title" content="WebGPU ç’°å¢ƒãƒãƒƒãƒ—ï¼ˆåå°„ï¼‰">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-environment-maps_ja.jpg">
<meta property="og:description" content="ç’°å¢ƒãƒãƒƒãƒ—ã®å®Ÿè£…æ–¹æ³•">
<meta property="og:url" content="https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-environment-maps.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webgpufundamentals.org">
<meta name="twitter:title" content="WebGPU ç’°å¢ƒãƒãƒƒãƒ—ï¼ˆåå°„ï¼‰">
<meta name="twitter:url" content="https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-environment-maps.html">
<meta name="twitter:description" content="ç’°å¢ƒãƒãƒƒãƒ—ã®å®Ÿè£…æ–¹æ³•">
<meta name="twitter:image:src" content="https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-environment-maps_ja.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webgpufundamentals.org/#website",
      "url":"https://webgpufundamentals.org/",
      "name":"webgpufundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-environment-maps.html#primaryimage",
      "url":"https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-environment-maps_ja.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-environment-maps.html#webpage",
      "url":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-environment-maps.html",
      "inLanguage":"ja",
      "name":"WebGPU ç’°å¢ƒãƒãƒƒãƒ—ï¼ˆåå°„ï¼‰",
      "keywords":"webgpu graphics programming",
      "isPartOf":{
        "@id":"https://webgpufundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-environment-maps.html#primaryimage"
      }
    }
  ]
}
</script>

<title>WebGPU ç’°å¢ƒãƒãƒƒãƒ—ï¼ˆåå°„ï¼‰</title>
<link href="/webgpu/lessons/resources/webgpufundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="apple-touch-icon" href="/webgpu/lessons/resources/webgpufundamentals-icon.png">
<link rel="icon" href="/webgpu/lessons/resources/webgpufundamentals-icon.png">

<link rel="stylesheet" href="/webgpu/lessons/lang.css">
<link rel="stylesheet" href="/webgpu/lessons/resources/lesson.css">
</head>
<body>
<div class="webgpu_navbar">
  <div>
    <select class="language">
    <option value="/webgpu/lessons/webgpu-environment-maps.html">English
    </option><option value="/webgpu/lessons/es/webgpu-environment-maps.html">Spanish
    </option><option value="/webgpu/lessons/ja/webgpu-environment-maps.html" selected="">æ—¥æœ¬èª
    </option><option value="/webgpu/lessons/ko/webgpu-environment-maps.html">í•œêµ­ì–´
    </option><option value="/webgpu/lessons/ru/webgpu-environment-maps.html">Ğ ÑƒÑÑĞºĞ¸Ğ¹
    </option><option value="/webgpu/lessons/tr/webgpu-environment-maps.html">TÃ¼rkÃ§e
    </option><option value="/webgpu/lessons/uk/webgpu-environment-maps.html">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°
    </option><option value="/webgpu/lessons/zh_cn/webgpu-environment-maps.html">ç®€ä½“ä¸­æ–‡
</option></select>


    <a href="#toc">ç›®æ¬¡</a>
    <input type="search" placeholder="?" id="search">
  </div>
</div>
<div class="webgpu_header">
  <h1><a href="/webgpu/lessons/ja/">webgpufundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(160px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub">
  <div>
    <div><a href="https://github.com/webgpu/webgpufundamentals">Fix, Fork, Contribute <!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"></path>
    </g>
</svg>
</a></div>
  </div>
</div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGPU ç’°å¢ƒãƒãƒƒãƒ—ï¼ˆåå°„ï¼‰</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <div class="warn">ã“ã®è¨˜äº‹ã¯Gemini Code Assistã«ã‚ˆã£ã¦è‡ªå‹•ç¿»è¨³ã•ã‚Œã¾ã—ãŸã€‚ç¿»è¨³ã«å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€ãŠæ‰‹æ•°ã§ã™ãŒ<a href="https://github.com/webgpu/webgpufundamentals/pulls">ã“ã¡ã‚‰</a>ã‹ã‚‰Pull Requestã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚</div>
<p>ã“ã®è¨˜äº‹ã¯ã€<a href="webgpu-cube-maps.html">ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã«é–¢ã™ã‚‹è¨˜äº‹</a>ã®ç¶šãã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€<a href="webgpu-lighting-directional.html">ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã«é–¢ã™ã‚‹è¨˜äº‹</a>ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹æ¦‚å¿µã‚‚ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®è¨˜äº‹ã‚’ã¾ã èª­ã‚“ã§ã„ãªã„å ´åˆã¯ã€æœ€åˆã«èª­ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</p>
<p><em>ç’°å¢ƒãƒãƒƒãƒ—</em>ã¯ã€æç”»ã—ã¦ã„ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç’°å¢ƒã‚’è¡¨ã—ã¾ã™ã€‚å±‹å¤–ã®ã‚·ãƒ¼ãƒ³ã‚’æç”»ã—ã¦ã„ã‚‹å ´åˆã¯ã€å±‹å¤–ã‚’è¡¨ã—ã¾ã™ã€‚ã‚¹ãƒ†ãƒ¼ã‚¸ä¸Šã®äººç‰©ã‚’æç”»ã—ã¦ã„ã‚‹å ´åˆã¯ã€ä¼šå ´ã‚’è¡¨ã—ã¾ã™ã€‚å®‡å®™ã®ã‚·ãƒ¼ãƒ³ã‚’æç”»ã—ã¦ã„ã‚‹å ´åˆã¯ã€æ˜Ÿã«ãªã‚Šã¾ã™ã€‚ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã®6ã¤ã®æ–¹å‘ã‹ã‚‰ç©ºé–“å†…ã®ç‚¹ã‹ã‚‰ã®ç’°å¢ƒã‚’ç¤ºã™6ã¤ã®ç”»åƒãŒã‚ã‚Œã°ã€ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã§ç’°å¢ƒãƒãƒƒãƒ—ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚</p>
<p>ã“ã‚Œã¯ã€ãƒ­ãƒ³ãƒ‰ãƒ³ã®ãƒ¬ãƒ‰ãƒ³ãƒ›ãƒ¼ãƒ«ãƒãƒ¼ã‚±ãƒƒãƒˆã®ãƒ­ãƒ“ãƒ¼ã‹ã‚‰ã®ç’°å¢ƒãƒãƒƒãƒ—ã§ã™ã€‚</p>
<div class="webgpu_center">
  <div class="side-by-side center-by-margin" style="max-width: 800px">
    <div><img src="../../resources/images/leadenhall_market/pos-x.jpg" style="min-width: 256px; width: 256px" class="border"><div>æ­£ã®x</div></div>
    <div><img src="../../resources/images/leadenhall_market/neg-x.jpg" style="min-width: 256px; width: 256px" class="border"><div>è² ã®x</div></div>
    <div><img src="../../resources/images/leadenhall_market/pos-y.jpg" style="min-width: 256px; width: 256px" class="border"><div>æ­£ã®y</div></div>
    <div><img src="../../resources/images/leadenhall_market/pos-z.jpg" style="min-width: 256px; width: 256px" class="border"><div>æ­£ã®z</div></div>
    <div><img src="../../resources/images/leadenhall_market/neg-z.jpg" style="min-width: 256px; width: 256px" class="border"><div>è² ã®z</div></div>
    <div><img src="../../resources/images/leadenhall_market/neg-y.jpg" style="min-width: 256px; width: 256px" class="border"><div>æ­£ã®y</div></div>
  </div>
</div>
<div class="webgpu_center">
  <a href="https://polyhaven.com/a/leadenhall_market">ãƒ¬ãƒ‰ãƒ³ãƒ›ãƒ¼ãƒ«ãƒãƒ¼ã‚±ãƒƒãƒˆ</a>ã€CC0 by: <a href="https://www.artstation.com/andreasmischok">Andreas Mischok</a>
</div>
<p><a href="webgpu-cube-maps.html">å‰ã®è¨˜äº‹</a>ã®ã‚³ãƒ¼ãƒ‰ã«åŸºã¥ã„ã¦ã€ç”Ÿæˆã—ãŸã‚­ãƒ£ãƒ³ãƒã‚¹ã®ä»£ã‚ã‚Šã«ãã‚Œã‚‰ã®6ã¤ã®ç”»åƒã‚’èª­ã¿è¾¼ã¿ã¾ã—ã‚‡ã†ã€‚<a href="webgpu-importing-textures.html">ãƒ†ã‚¯ã‚¹ãƒãƒ£ã¸ã®ç”»åƒã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹è¨˜äº‹</a>ã‹ã‚‰ã€ç”»åƒã‚’èª­ã¿è¾¼ã‚€é–¢æ•°ã¨ç”»åƒã‹ã‚‰ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ä½œæˆã™ã‚‹é–¢æ•°ã®2ã¤ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  async function loadImageBitmap(url) {
    const res = await fetch(url);
    const blob = await res.blob();
    return await createImageBitmap(blob, { colorSpaceConversion: 'none' });
  }

  async function createTextureFromImage(device, url, options) {
    const imgBitmap = await loadImageBitmap(url);
    return createTextureFromSource(device, imgBitmap, options);
  }
</pre>
<p>è¤‡æ•°ã®ç”»åƒã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã®ã‚‚ã®ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">+  async function createTextureFromImages(device, urls, options) {
+    const imgBitmaps = await Promise.all(url.map(loadImageBitmap));
+    return createTextureFromSource(device, imgBitmaps, options);
+  }

  async function createTextureFromImage(device, url, options) {
-    const imgBitmap = await loadImageBitmap(url);
-    return createTextureFromSource(device, imgBitmap, options);
+    return createTextureFromImages(device, [url], options);
  }
</pre>
<p>ã¤ã„ã§ã«ã€æ—¢å­˜ã®é–¢æ•°ã‚’æ–°ã—ã„é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ã“ã‚Œã§ã€æ–°ã—ã„é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦6ã¤ã®ç”»åƒã‚’èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-  const texture = await createTextureFromSources(
-      device, faceCanvases, {mips: true, flipY: false});
+  const texture = await createTextureFromImages(
+      device,
+      [
+        'resources/images/leadenhall_market/pos-x.jpg',
+        'resources/images/leadenhall_market/neg-x.jpg',
+        'resources/images/leadenhall_market/pos-y.jpg',
+        'resources/images/leadenhall_market/neg-y.jpg',
+        'resources/images/leadenhall_market/pos-z.jpg',
+        'resources/images/leadenhall_market/neg-z.jpg',
+      ],
+      {mips: true, flipY: false},
+  );
</pre>
<p>ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã§ã¯ã€æç”»ã™ã‚‹å„ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦ã€ç›®/ã‚«ãƒ¡ãƒ©ã‹ã‚‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¡¨é¢ä¸Šã®ãã®ä½ç½®ã¾ã§ã®ãƒ™ã‚¯ãƒˆãƒ«ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã€ãã®è¡¨é¢ã‹ã‚‰ã©ã®æ–¹å‘ã«åå°„ã™ã‚‹ã‹ã‚’çŸ¥ã‚ŠãŸã„ã§ã™ã€‚ãã®æ–¹å‘ã‚’ä½¿ç”¨ã—ã¦ã€ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã‹ã‚‰è‰²ã‚’å–å¾—ã§ãã¾ã™ã€‚</p>
<p>åå°„ã®å¼ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate notranslate" translate="no">reflectionDir = eyeToSurfaceDir â€“
    2 âˆ— dot(surfaceNormal, eyeToSurfaceDir) âˆ— surfaceNormal
</pre>
<p>ç§ãŸã¡ãŒè¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã«ã¤ã„ã¦è€ƒãˆã‚‹ã¨ã€ãã‚Œã¯çœŸå®Ÿã§ã™ã€‚<a href="webgpu-lighting-directional.html">ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã®è¨˜äº‹</a>ã‹ã‚‰ã€2ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒ‰ãƒƒãƒˆç©ã¯2ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«é–“ã®è§’åº¦ã®ã‚³ã‚µã‚¤ãƒ³ã‚’è¿”ã™ã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¿½åŠ ã™ã‚‹ã¨æ–°ã—ã„ãƒ™ã‚¯ãƒˆãƒ«ãŒå¾—ã‚‰ã‚Œã‚‹ã®ã§ã€å¹³ã‚‰ãªè¡¨é¢ã«å‚ç›´ã«ç›´æ¥è¦‹ã¦ã„ã‚‹ç›®ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-180-01.svg" style="width: 400px"></div>
<p>ä¸Šè¨˜ã®å¼ã‚’è¦–è¦šåŒ–ã—ã¾ã—ã‚‡ã†ã€‚ã¾ãšã€æ­£åå¯¾ã®æ–¹å‘ã‚’å‘ã„ã¦ã„ã‚‹2ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒ‰ãƒƒãƒˆç©ãŒ-1ã§ã‚ã‚‹ã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚è¦–è¦šçš„ã«ã¯</p>
<div class="webgpu_center"><img src="../resources/reflect-180-02.svg" style="width: 400px"></div>
<p>ãã®ãƒ‰ãƒƒãƒˆç©ã‚’<span style="color:black; font-weight:bold;">eyeToSurfaceDir</span>ã¨<span style="color:green;">normal</span>ã§åå°„å¼ã«ä»£å…¥ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-180-03.svg" style="width: 400px"></div>
<p>-2ã«-1ã‚’æ›ã‘ã‚‹ã¨æ­£ã®2ã«ãªã‚Šã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-180-04.svg" style="width: 400px"></div>
<p>ã—ãŸãŒã£ã¦ã€ãƒ™ã‚¯ãƒˆãƒ«ã‚’æ¥ç¶šã—ã¦è¿½åŠ ã™ã‚‹ã¨ã€<span style="color: red">åå°„ãƒ™ã‚¯ãƒˆãƒ«</span>ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-180-05.svg" style="width: 400px"></div>
<p>ä¸Šè¨˜ã®ã‚ˆã†ã«ã€2ã¤ã®æ³•ç·šãŒä¸ãˆã‚‰ã‚Œã‚‹ã¨ã€1ã¤ã¯ç›®ã‹ã‚‰ã®æ–¹å‘ã‚’å®Œå…¨ã«æ‰“ã¡æ¶ˆã—ã€2ã¤ç›®ã¯åå°„ã‚’ç›´æ¥ç›®ã®æ–¹ã«å‘ã‘ã¾ã™ã€‚ã“ã‚Œã‚’å…ƒã®å›³ã«æˆ»ã™ã¨ã€ã¾ã•ã«æœŸå¾…ã©ãŠã‚Šã«ãªã‚Šã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-180-06.svg" style="width: 400px"></div>
<p>è¡¨é¢ã‚’å³ã«45åº¦å›è»¢ã•ã›ã¾ã—ã‚‡ã†ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-45-01.svg" style="width: 400px"></div>
<p>135åº¦é›¢ã‚ŒãŸ2ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒ‰ãƒƒãƒˆç©ã¯-0.707ã§ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-45-02.svg" style="width: 400px"></div>
<p>ã—ãŸãŒã£ã¦ã€ã™ã¹ã¦ã‚’å¼ã«ä»£å…¥ã™ã‚‹ã¨</p>
<div class="webgpu_center"><img src="../resources/reflect-45-03.svg" style="width: 400px"></div>
<p>å†ã³2ã¤ã®è² ã®æ•°ã‚’æ›ã‘ã‚‹ã¨æ­£ã«ãªã‚Šã¾ã™ãŒã€<span style="color: green">ãƒ™ã‚¯ãƒˆãƒ«</span>ã¯ç´„30ï¼…çŸ­ããªã‚Šã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-45-04.svg" style="width: 400px"></div>
<p>ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¶³ã—åˆã‚ã›ã‚‹ã¨ã€<span style="color: red">åå°„ãƒ™ã‚¯ãƒˆãƒ«</span>ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-45-05.svg" style="width: 400px"></div>
<p>ã“ã‚Œã‚’å…ƒã®å›³ã«æˆ»ã™ã¨ã€æ­£ã—ã„ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚</p>
<div class="webgpu_center"><img src="../resources/reflect-45-06.svg" style="width: 400px"></div>
<p>ãã®<span style="color: red">åå°„æ–¹å‘</span>ã‚’ä½¿ç”¨ã—ã¦ã€ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã‚’è¦‹ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¡¨é¢ã‚’è‰²ä»˜ã‘ã—ã¾ã™ã€‚</p>
<p>ã“ã‚Œã¯ã€è¡¨é¢ã®å›è»¢ã‚’è¨­å®šã—ã€æ–¹ç¨‹å¼ã®ã•ã¾ã–ã¾ãªéƒ¨åˆ†ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹å›³ã§ã™ã€‚ã¾ãŸã€åå°„ãƒ™ã‚¯ãƒˆãƒ«ãŒã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã®ã•ã¾ã–ã¾ãªé¢ã‚’æŒ‡ã—ã€è¡¨é¢ã®è‰²ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚Šã¾ã™ã€‚</p>
<p></p><div class="webgpu_diagram_container">
  <iframe class="webgpu_diagram " style="width: 700px; height: 500px;" src="/webgpu/lessons/resources/environment-mapping.html"></iframe>
</div>

<p></p>
<p>åå°„ã®ä»•çµ„ã¿ã¨ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã‹ã‚‰å€¤ã‚’æ¤œç´¢ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’å¤‰æ›´ã—ã¦ãã‚Œã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚</p>
<p>ã¾ãšã€é ‚ç‚¹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã§ã€é ‚ç‚¹ã®ãƒ¯ãƒ¼ãƒ«ãƒ‰ä½ç½®ã¨ãƒ¯ãƒ¼ãƒ«ãƒ‰æŒ‡å‘ã®æ³•ç·šã‚’è¨ˆç®—ã—ã€ãã‚Œã‚‰ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸é–“å¤‰æ•°ã¨ã—ã¦ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã«æ¸¡ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€<a href="webgpu-3d-lighting-spot.html">ã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆã«é–¢ã™ã‚‹è¨˜äº‹</a>ã§è¡Œã£ãŸã“ã¨ã¨ä¼¼ã¦ã„ã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-wgsl" translate="no">struct Uniforms {
-  matrix: mat4x4f,
+  projection: mat4x4f,
+  view: mat4x4f,
+  world: mat4x4f,
+  cameraPosition: vec3f,
};

struct Vertex {
  @location(0) position: vec4f,
+  @location(1) normal: vec3f,
};

struct VSOutput {
  @builtin(position) position: vec4f,
-  @location(0) normal: vec3f,
+  @location(0) worldPosition: vec3f,
+  @location(1) worldNormal: vec3f,
};

@group(0) @binding(0) var&lt;uniform&gt; uni: Uniforms;
@group(0) @binding(1) var ourSampler: sampler;
@group(0) @binding(2) var ourTexture: texture_cube&lt;f32&gt;;

@vertex fn vs(vert: Vertex) -&gt; VSOutput {
  var vsOut: VSOutput;
-  vsOut.position = uni.matrix * vert.position;
-  vsOut.normal = normalize(vert.position.xyz);
+  vsOut.position = uni.projection * uni.view * uni.world * vert.position;
+  vsOut.worldPosition = (uni.world * vert.position).xyz;
+  vsOut.worldNormal = (uni.world * vec4f(vert.normal, 0)).xyz;
  return vsOut;
}
</pre>
<p>æ¬¡ã«ã€ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã§ã€é ‚ç‚¹é–“ã§ã‚µãƒ¼ãƒ•ã‚§ã‚¹ã‚’æ¨ªåˆ‡ã£ã¦è£œé–“ã•ã‚Œã‚‹ãŸã‚ã€<code class="notranslate" translate="no">worldNormal</code>ã‚’æ­£è¦åŒ–ã—ã¾ã™ã€‚<a href="webgpu-cameras.html">ã‚«ãƒ¡ãƒ©ã«é–¢ã™ã‚‹è¨˜äº‹</a>ã®è¡Œåˆ—æ¼”ç®—ã«åŸºã¥ã„ã¦ã€ãƒ“ãƒ¥ãƒ¼è¡Œåˆ—ã®3è¡Œç›®ã‚’å–å¾—ã—ã¦ãã‚Œã‚’å¦å®šã—ã€ãã‚Œã‚’ã‚µãƒ¼ãƒ•ã‚§ã‚¹ã®ãƒ¯ãƒ¼ãƒ«ãƒ‰ä½ç½®ã‹ã‚‰å¼•ãã“ã¨ã§ã€ã‚«ãƒ¡ãƒ©ã®ãƒ¯ãƒ¼ãƒ«ãƒ‰ä½ç½®ã‚’å–å¾—ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€<code class="notranslate" translate="no">eyeToSurfaceDir</code>ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
<p>ãã—ã¦æœ€å¾Œã«ã€ä¸Šè¨˜ã§èª¬æ˜ã—ãŸå¼ã‚’å®Ÿè£…ã™ã‚‹çµ„ã¿è¾¼ã¿WGSLé–¢æ•°ã§ã‚ã‚‹<code class="notranslate" translate="no">reflect</code>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãã®çµæœã‚’ä½¿ç”¨ã—ã¦ã€ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã‹ã‚‰è‰²ã‚’å–å¾—ã—ã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-wgsl" translate="no">@fragment fn fs(vsOut: VSOutput) -&gt; @location(0) vec4f {
+  let worldNormal = normalize(vsOut.worldNormal);
+  let eyeToSurfaceDir = normalize(vsOut.worldPosition - uni.cameraPosition);
+  let direction = reflect(eyeToSurfaceDir, worldNormal);

-  return textureSample(ourTexture, ourSampler, normalize(vsOut.normal));
+  return textureSample(ourTexture, ourSampler, direction);
}
</pre>
<p>ã“ã®ä¾‹ã«ã¯ã€å®Ÿéš›ã®æ³•ç·šã‚‚å¿…è¦ã§ã™ã€‚ã‚­ãƒ¥ãƒ¼ãƒ–ã®é¢ãŒå¹³ã‚‰ã«è¦‹ãˆã‚‹ã‚ˆã†ã«ã€å®Ÿéš›ã®æ³•ç·šãŒå¿…è¦ã§ã™ã€‚å‰ã®ä¾‹ã§ã¯ã€ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã ã‘ã«ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®ä½ç½®ã‚’å†åˆ©ç”¨ã—ã¾ã—ãŸãŒã€ã“ã®å ´åˆã¯ã€<a href="webgpu-lighting-directional.html">ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã«é–¢ã™ã‚‹è¨˜äº‹</a>ã§èª¬æ˜ã—ãŸã‚ˆã†ã«ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®å®Ÿéš›ã®æ³•ç·šãŒå¿…è¦ã§ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const vertexData = new Float32Array([
-     // å‰é¢
-    -1,  1,  1,
-    -1, -1,  1,
-     1,  1,  1,
-     1, -1,  1,
-     // å³é¢
-     1,  1, -1,
-     1,  1,  1,
-     1, -1, -1,
-     1, -1,  1,
-     // èƒŒé¢
-     1,  1, -1,
-     1, -1, -1,
-    -1,  1, -1,
-    -1, -1, -1,
-    // å·¦é¢
-    -1,  1,  1,
-    -1,  1, -1,
-    -1, -1,  1,
-    -1, -1, -1,
-    // åº•é¢
-     1, -1,  1,
-    -1, -1,  1,
-     1, -1, -1,
-    -1, -1, -1,
-    // ä¸Šé¢
-    -1,  1,  1,
-     1,  1,  1,
-    -1,  1, -1,
-     1,  1, -1,
+     //  ä½ç½®   |  æ³•ç·š
+     //-------------+----------------------
+     // å‰é¢      æ­£ã®z
+    -1,  1,  1,         0,  0,  1,
+    -1, -1,  1,         0,  0,  1,
+     1,  1,  1,         0,  0,  1,
+     1, -1,  1,         0,  0,  1,
+     // å³é¢      æ­£ã®x
+     1,  1, -1,         1,  0,  0,
+     1,  1,  1,         1,  0,  0,
+     1, -1, -1,         1,  0,  0,
+     1, -1,  1,         1,  0,  0,
+     // èƒŒé¢       è² ã®z
+     1,  1, -1,         0,  0, -1,
+     1, -1, -1,         0,  0, -1,
+    -1,  1, -1,         0,  0, -1,
+    -1, -1, -1,         0,  0, -1,
+    // å·¦é¢        è² ã®x
+    -1,  1,  1,        -1,  0,  0,
+    -1,  1, -1,        -1,  0,  0,
+    -1, -1,  1,        -1,  0,  0,
+    -1, -1, -1,        -1,  0,  0,
+    // åº•é¢      è² ã®y
+     1, -1,  1,         0, -1,  0,
+    -1, -1,  1,         0, -1,  0,
+     1, -1, -1,         0, -1,  0,
+    -1, -1, -1,         0, -1,  0,
+    // ä¸Šé¢         æ­£ã®y
+    -1,  1,  1,         0,  1,  0,
+     1,  1,  1,         0,  1,  0,
+    -1,  1, -1,         0,  1,  0,
+     1,  1, -1,         0,  1,  0,
  ]);
</pre>
<p>ãã—ã¦ã‚‚ã¡ã‚ã‚“ã€æ³•ç·šã‚’æä¾›ã™ã‚‹ãŸã‚ã«ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const pipeline = device.createRenderPipeline({
    label: '2 attributes',
    layout: 'auto',
    vertex: {
      module,
      buffers: [
        {
-          arrayStride: (3) * 4, // (3) floats 4 bytes each
+          arrayStride: (3 + 3) * 4, // (6) floats 4 bytes each
          attributes: [
            {shaderLocation: 0, offset: 0, format: 'float32x3'},  // position
+            {shaderLocation: 1, offset: 12, format: 'float32x3'},  // normal
          ],
        },
      ],
    },

</pre>
<p>ã„ã¤ã‚‚ã®ã‚ˆã†ã«ã€ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒƒãƒ•ã‚¡ã¨ãƒ“ãƒ¥ãƒ¼ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-  // è¡Œåˆ—
-  const uniformBufferSize = (16) * 4;
+  // å°„å½±ã€ãƒ“ãƒ¥ãƒ¼ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ã€ã‚«ãƒ¡ãƒ©ä½ç½®ã€ãƒ‘ãƒƒãƒ‰
+  const uniformBufferSize = (16 + 16 + 16 + 3 + 1) * 4;
  const uniformBuffer = device.createBuffer({
    label: 'uniforms',
    size: uniformBufferSize,
    usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,
  });

  const uniformValues = new Float32Array(uniformBufferSize / 4);

  // float32ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã®ã•ã¾ã–ã¾ãªãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ å€¤ã¸ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆ
-  const kMatrixOffset = 0;
-  const matrixValue = uniformValues.subarray(kMatrixOffset, kMatrixOffset + 16);
  const kProjectionOffset = 0;
  const kViewOffset = 16;
  const kWorldOffset = 32;
+  const projectionValue = uniformValues.subarray(kProjectionOffset, kProjectionOffset + 16);
+  const viewValue = uniformValues.subarray(kViewOffset, kViewOffset + 16);
+  const worldValue = uniformValues.subarray(kWorldOffset, kWorldOffset + 16);
+  const cameraPositionValue = uniformValues.subarray(
+      kCameraPositionOffset, kCameraPositionOffset + 3);
</pre>
<p>ãã—ã¦ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«ãã‚Œã‚‰ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">    const aspect = canvas.clientWidth / canvas.clientHeight;
    mat4.perspective(
        60 * Math.PI / 180,
        aspect,
        0.1,      // zNear
        10,      // zFar
-        matrixValue,
+        projectionValue,
    );
+    cameraPositionValue.set([0, 0, 4]);  // ã‚«ãƒ¡ãƒ©ä½ç½®
    const view = mat4.lookAt(
-      [0, 1, 5],  // ã‚«ãƒ¡ãƒ©ä½ç½®
+      cameraPositionValue,
      [0, 0, 0],  // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
      [0, 1, 0],  // ä¸Š
+      viewValue,
    );
-    mat4.multiply(matrixValue, view, matrixValue);
-    mat4.rotateX(matrixValue, settings.rotation[0], matrixValue);
-    mat4.rotateY(matrixValue, settings.rotation[1], matrixValue);
-    mat4.rotateZ(matrixValue, settings.rotation[2], matrixValue);
+    mat4.identity(worldValue);
+    mat4.rotateX(worldValue, time * -0.1, worldValue);
+    mat4.rotateY(worldValue, time * -0.2, worldValue);

    // ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ å€¤ã‚’ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒƒãƒ•ã‚¡ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™
    device.queue.writeBuffer(uniformBuffer, 0, uniformValues);
</pre>
<p>ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’rAFãƒ«ãƒ¼ãƒ—ã«å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-  const degToRad = d =&gt; d * Math.PI / 180;
-
-  const settings = {
-    rotation: [degToRad(20), degToRad(25), degToRad(0)],
-  };
-
-  const radToDegOptions = { min: -360, max: 360, step: 1, converters: GUI.converters.radToDeg };
-
-  const gui = new GUI();
-  gui.onChange(render);
-  gui.add(settings.rotation, '0', radToDegOptions).name('rotation.x');
-  gui.add(settings.rotation, '1', radToDegOptions).name('rotation.y');
-  gui.add(settings.rotation, '2', radToDegOptions).name('rotation.z');

  let depthTexture;

-  function render() {
+  function render(time) {
+    time *= 0.001;

     ...

+    requestAnimationFrame(render);
+  }
+  requestAnimationFrame(render);

  const observer = new ResizeObserver(entries =&gt; {
    for (const entry of entries) {
      const canvas = entry.target;
      const width = entry.contentBoxSize[0].inlineSize;
      const height = entry.contentBoxSize[0].blockSize;
      canvas.width = Math.max(1, Math.min(width, device.limits.maxTextureDimension2D));
      canvas.height = Math.max(1, Math.min(height, device.limits.maxTextureDimension2D));
-      // å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
-      render();
    }
  });
  observer.observe(canvas);
</pre>
<p>ãã—ã¦ã€ãã‚Œã§å¾—ã‚‰ã‚Œã‚‹ã‚‚ã®ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</p>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-environment-map-backward.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-environment-map-backward.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<p>ã‚ˆãè¦‹ã‚‹ã¨ã€å°ã•ãªå•é¡ŒãŒè¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<div class="webgpu_center"><img src="../resources/environment-map-backward.png" class="nobg" style="width: 600px;"></div>
<h2 id="åå°„æ–¹å‘ã®ä¿®æ­£"><a id="a-flipped"></a>åå°„æ–¹å‘ã®ä¿®æ­£</h2>
<p>ç’°å¢ƒãƒãƒƒãƒ—ãŒé©ç”¨ã•ã‚ŒãŸã‚­ãƒ¥ãƒ¼ãƒ–ã¯ã€é¡å¼µã‚Šã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’è¡¨ã—ã¾ã™ã€‚ã—ã‹ã—ã€é¡ã¯é€šå¸¸ã€æ°´å¹³æ–¹å‘ã«åè»¢ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ä½•ãŒèµ·ã“ã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<p>å•é¡Œã¯ã€ç§ãŸã¡ãŒã‚­ãƒ¥ãƒ¼ãƒ–ã®å†…å´ã‹ã‚‰å¤–å´ã‚’è¦‹ã¦ã„ã‚‹ã“ã¨ã§ã™ãŒã€<a href="webgpu-cube-maps.html">å‰ã®è¨˜äº‹</a>ã‹ã‚‰ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®å„é¢ã«ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸã¨ãã€å¤–å´ã‹ã‚‰è¦‹ã‚‹ã¨æ­£ã—ããƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚ŒãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚</p>
<div class="webgpu_center">
  <div data-diagram="show-cube-map" class="center-by-margin" style="width: 700px; height: 400px"></div>
</div>
<p>ã“ã‚Œã‚’åˆ¥ã®è¦‹æ–¹ã‚’ã™ã‚‹ã¨ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®å†…å´ã‹ã‚‰è¦‹ã‚‹ã¨ã€ã€Œy-upå³æ‰‹åº§æ¨™ç³»ã€ã«ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€æ­£ã®zãŒå‰æ–¹ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ä¸€æ–¹ã€ã“ã‚Œã¾ã§ã®3Dæ•°å­¦ã¯ã™ã¹ã¦ã€ã€Œy-upå·¦æ‰‹åº§æ¨™ç³»ã€<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€è² ã®zãŒå‰æ–¹ã§ã™ã€‚ç°¡å˜ãªè§£æ±ºç­–ã¯ã€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã™ã‚‹ã¨ãã«Zåº§æ¨™ã‚’åè»¢ã•ã›ã‚‹ã“ã¨ã§ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-wgsl" translate="no">-  return textureSample(ourTexture, ourSampler, direction);
+  return textureSample(ourTexture, ourSampler, direction * vec3f(1, 1, -1));
</pre>
<p>ã“ã‚Œã§ã€é¡ã®ã‚ˆã†ã«åå°„ãŒåè»¢ã—ã¾ã—ãŸã€‚</p>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-environment-map.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-environment-map.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<p>æ¬¡ã«ã€<a href="webgpu-skybox.html">ã‚¹ã‚«ã‚¤ãƒœãƒƒã‚¯ã‚¹ã«ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•</a>ã‚’ç¤ºã—ã¾ã™ã€‚</p>
<h2 id="ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã®æ¤œç´¢ã¨ä½œæˆ">ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã®æ¤œç´¢ã¨ä½œæˆ</h2>
<p><a href="https://polyhaven.com/hdris">polyhaven.com</a>ã§ä½•ç™¾ã‚‚ã®ç„¡æ–™ã®ãƒ‘ãƒãƒ©ãƒã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã‚Œã‚‰ã®ã„ãšã‚Œã‹ã®jpgã¾ãŸã¯pngã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ï¼ˆå³ä¸Šã®â‰¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ï¼‰ã€‚æ¬¡ã«ã€<a href="https://greggman.github.io/panorama-to-cubemap/">ã“ã®ãƒšãƒ¼ã‚¸</a>ã«ç§»å‹•ã—ã€.jpgã¾ãŸã¯.pngãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãã“ã«ãƒ‰ãƒ©ãƒƒã‚°ã‚¢ãƒ³ãƒ‰ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã™ã€‚å¿…è¦ãªã‚µã‚¤ã‚ºã¨å½¢å¼ã‚’é¸æŠã—ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—ã®é¢ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>æ­£ç›´ãªã¨ã“ã‚ã€ã“ã®ã€Œå·¦æ‰‹ã€å¯¾ã€Œå³æ‰‹ã€åº§æ¨™ç³»ã®è©±ã¯éå¸¸ã«ç´›ã‚‰ã‚ã—ã„ã¨æ„Ÿã˜ã¦ãŠã‚Šã€ã€Œ+xãŒå³ã€+yãŒä¸Šã€-zãŒå‰æ–¹ã€ã¨è¨€ã£ãŸæ–¹ãŒã¯ã‚‹ã‹ã«æ›–æ˜§ã•ãŒãªã„ã¨æ€ã„ã¾ã™ã€‚ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„å ´åˆã¯ã€<a href="https://www.google.com/search?q=right+handed+vs+left+handed+coordinate+system&amp;tbm=isch">ã‚°ã‚°ã£ã¦ã¿ã¦ãã ã•ã„</a>ğŸ˜„ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgpu/lessons/webgpu-environment-maps.html">English
    </option><option value="/webgpu/lessons/es/webgpu-environment-maps.html">Spanish
    </option><option value="/webgpu/lessons/ja/webgpu-environment-maps.html" selected="">æ—¥æœ¬èª
    </option><option value="/webgpu/lessons/ko/webgpu-environment-maps.html">í•œêµ­ì–´
    </option><option value="/webgpu/lessons/ru/webgpu-environment-maps.html">Ğ ÑƒÑÑĞºĞ¸Ğ¹
    </option><option value="/webgpu/lessons/tr/webgpu-environment-maps.html">TÃ¼rkÃ§e
    </option><option value="/webgpu/lessons/uk/webgpu-environment-maps.html">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°
    </option><option value="/webgpu/lessons/zh_cn/webgpu-environment-maps.html">ç®€ä½“ä¸­æ–‡
</option></select>


        <div id="toc">
          <ul>  <li>åŸºæœ¬</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-fundamentals.html">åŸºæœ¬</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-inter-stage-variables.html">inter-stageå¤‰æ•°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-uniforms.html">ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ </a></li>
<li><a href="/webgpu/lessons/ja/webgpu-storage-buffers.html">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒƒãƒ•ã‚¡</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-vertex-buffers.html">é ‚ç‚¹ãƒãƒƒãƒ•ã‚¡</a></li>
  <li>ãƒ†ã‚¯ã‚¹ãƒãƒ£</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-textures.html">ãƒ†ã‚¯ã‚¹ãƒãƒ£</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-importing-textures.html">ç”»åƒã®èª­ã¿è¾¼ã¿</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-textures-external-video.html">ãƒ“ãƒ‡ã‚ªã®ä½¿ç”¨</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-cube-maps.html">ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-storage-textures.html">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ†ã‚¯ã‚¹ãƒãƒ£</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-multisampling.html">ãƒãƒ«ãƒã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° / MSAA</a></li>
        </ul>
<li><a href="/webgpu/lessons/ja/webgpu-constants.html">å®šæ•°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-memory-layout.html">æ§‹é€ ä½“ã¨ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-transparency.html">é€æ˜åº¦ã¨ãƒ–ãƒ¬ãƒ³ãƒ‡ã‚£ãƒ³ã‚°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-bind-group-layouts.html">ãƒã‚¤ãƒ³ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-copying-data.html">ãƒ‡ãƒ¼ã‚¿ã®ã‚³ãƒ”ãƒ¼</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-limits-and-features.html">ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¨åˆ¶é™</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-timing.html">ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-wgsl.html">WGSL</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-how-it-works.html">ä»•çµ„ã¿</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-compatibility-mode.html">äº’æ›ãƒ¢ãƒ¼ãƒ‰</a></li>
        </ul>
  <li>3Dã®æ•°å­¦</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-translation.html">å¹³è¡Œç§»å‹•</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-rotation.html">å›è»¢</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-scale.html">ã‚¹ã‚±ãƒ¼ãƒ«</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-matrix-math.html">è¡Œåˆ—æ¼”ç®—</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-orthographic-projection.html">æ­£å°„å½±</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-perspective-projection.html">é€è¦–æŠ•å½±</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-cameras.html">ã‚«ãƒ¡ãƒ©</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-matrix-stacks.html">è¡Œåˆ—ã‚¹ã‚¿ãƒƒã‚¯</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-scene-graphs.html">ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•</a></li>
        </ul>
  <li>ãƒ©ã‚¤ãƒˆ</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-lighting-directional.html">æŒ‡å‘æ€§ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-lighting-point.html">ç‚¹å…‰æº</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-lighting-spot.html">ã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆ</a></li>
        </ul>
  <li>ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-large-triangle-to-cover-clip-space.html">å¤§ããªã‚¯ãƒªãƒƒãƒ—ç©ºé–“ã®ä¸‰è§’å½¢</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-environment-maps.html">ç’°å¢ƒãƒãƒƒãƒ—</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-skybox.html">ã‚¹ã‚«ã‚¤ãƒœãƒƒã‚¯ã‚¹</a></li>
        </ul>
  <li>ãƒã‚¹ãƒˆãƒ—ãƒ­ã‚»ãƒƒã‚·ãƒ³ã‚°</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-post-processing.html">åŸºæœ¬çš„ãªCRTã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</a></li>
        </ul>
        </ul>
  <li>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆã‚·ã‚§ãƒ¼ãƒ€</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-compute-shaders.html">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®åŸºæœ¬</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-compute-shaders-histogram.html">ç”»åƒãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ </a></li>
<li><a href="/webgpu/lessons/ja/webgpu-compute-shaders-histogram-part-2.html">ç”»åƒãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ  ãƒ‘ãƒ¼ãƒˆ2</a></li>
        </ul>
  <li>ãã®ä»–ã®ãƒˆãƒ”ãƒƒã‚¯</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-resizing-the-canvas.html">Resizing the Canvas</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-multiple-canvases.html">è¤‡æ•°ã®ã‚­ãƒ£ãƒ³ãƒã‚¹</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-points.html">ãƒã‚¤ãƒ³ãƒˆ</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-from-webgl.html">WebGLã‹ã‚‰WebGPUã¸</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-optimization.html">é€Ÿåº¦ã¨æœ€é©åŒ–</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-debugging.html">ãƒ‡ãƒãƒƒã‚°ã¨ã‚¨ãƒ©ãƒ¼</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-resources.html">ãƒªã‚½ãƒ¼ã‚¹ / å‚è€ƒæ–‡çŒ®</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-wgsl-function-reference.html">WGSL é–¢æ•°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a></li>
<li><a href="/webgpu/lessons/resources/wgsl-offset-computer.html">WGSL ã‚ªãƒ•ã‚»ãƒƒãƒˆè¨ˆç®—æ©Ÿ</a></li>
        </ul></ul>
<ul>
  <li><a href="https://github.com/webgpu/webgpufundamentals">github</a></li>
  <li><a href="https://google.github.io/tour-of-wgsl/">Tour of WGSL</a></li>
  <li><a href="https://gpuweb.github.io/types/">WebGPU API Reference</a></li>
  <li><a href="https://www.w3.org/TR/webgpu/">WebGPU Spec</a></li>
  <li><a href="https://www.w3.org/TR/WGSL/">WGSL Spec</a></li>
  <li><a href="https://webgpureport.org">WebGPUReport.org</a></li>
  <li><a href="https://web3dsurvey.com/webgpu">Web3DSurvey.com</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        <div>å•é¡Œç‚¹/ãƒã‚°? <a href="https://github.com/webgpu/webgpufundamentals/issues">githubã§issueã‚’ä½œæˆ</a>.</div>

        <div id="disqus_thread"></div>
        <script>
            var disqus_config = function () {
              this.page.url = `${window.location.origin}${window.location.pathname}`;
              this.page.identifier = `WebGPU ç’°å¢ƒãƒãƒƒãƒ—ï¼ˆåå°„ï¼‰`;
            };
            (function() { // DON'T EDIT BELOW THIS LINE
                if (window.location.hostname.indexOf("webgpufundamentals.org") < 0) {
                    return;
                }
                var d = document, s = d.createElement('script');
                s.src = 'https://webgpufundamentals-org.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>

<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgpufundamentals",
};
</script>
<script src="/contributors.js"></script>
<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
<script src="/3rdparty/jquery-3.3.1.slim.min.js"></script>
<script src="/webgpu/lessons/resources/prettify.js"></script>
<script src="/webgpu/lessons/resources/lesson.js" type="module"></script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-92BFT5PE4H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-92BFT5PE4H');
</script>






</body></html>