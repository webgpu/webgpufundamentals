<!DOCTYPE html><!-- this file is auto-generated from webgpu/lessons/ja/webgpu-scene-graphs.md. Do not edited directly --><!--
Copyright 2023, GfxFundamentals Contributors
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

* Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the following disclaimer
  in the documentation and/or other materials provided with the
  distribution.

* Neither the name of GfxFundamentals nor the names of the
  contributors may be used to endorse or promote products derived from
  this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


--><html lang="ja"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•">
<meta name="keywords" content="webgpu graphics">
<meta name="thumbnail" content="https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-scene-graphs_ja.jpg">

<meta property="og:title" content="WebGPU ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-scene-graphs_ja.jpg">
<meta property="og:description" content="ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•">
<meta property="og:url" content="https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-scene-graphs.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webgpufundamentals.org">
<meta name="twitter:title" content="WebGPU ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•">
<meta name="twitter:url" content="https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-scene-graphs.html">
<meta name="twitter:description" content="ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•">
<meta name="twitter:image:src" content="https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-scene-graphs_ja.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webgpufundamentals.org/#website",
      "url":"https://webgpufundamentals.org/",
      "name":"webgpufundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-scene-graphs.html#primaryimage",
      "url":"https://webgpufundamentals.org/webgpu/lessons/screenshots/webgpu-scene-graphs_ja.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-scene-graphs.html#webpage",
      "url":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-scene-graphs.html",
      "inLanguage":"ja",
      "name":"WebGPU ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•",
      "keywords":"webgpu graphics programming",
      "isPartOf":{
        "@id":"https://webgpufundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webgpufundamentals.org/webgpu/lessons/ja/webgpu-scene-graphs.html#primaryimage"
      }
    }
  ]
}
</script>

<title>WebGPU ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•</title>
<link href="/webgpu/lessons/resources/webgpufundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="apple-touch-icon" href="/webgpu/lessons/resources/webgpufundamentals-icon.png">
<link rel="icon" href="/webgpu/lessons/resources/webgpufundamentals-icon.png">

<link rel="stylesheet" href="/webgpu/lessons/lang.css">
<link rel="stylesheet" href="/webgpu/lessons/resources/lesson.css">
</head>
<body>
<div class="webgpu_navbar">
  <div>
    <select class="language">
    <option value="/webgpu/lessons/webgpu-scene-graphs.html">English
    </option><option value="/webgpu/lessons/es/webgpu-scene-graphs.html">Spanish
    </option><option value="/webgpu/lessons/ja/webgpu-scene-graphs.html" selected="">æ—¥æœ¬èª
    </option><option value="/webgpu/lessons/ko/webgpu-scene-graphs.html">í•œêµ­ì–´
    </option><option value="/webgpu/lessons/ru/webgpu-scene-graphs.html">Ğ ÑƒÑÑĞºĞ¸Ğ¹
    </option><option value="/webgpu/lessons/tr/webgpu-scene-graphs.html">TÃ¼rkÃ§e
    </option><option value="/webgpu/lessons/uk/webgpu-scene-graphs.html">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°
    </option><option value="/webgpu/lessons/zh_cn/webgpu-scene-graphs.html">ç®€ä½“ä¸­æ–‡
</option></select>


    <a href="#toc">ç›®æ¬¡</a>
    <input type="search" placeholder="?" id="search">
  </div>
</div>
<div class="webgpu_header">
  <h1><a href="/webgpu/lessons/ja/">webgpufundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(160px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub">
  <div>
    <div><a href="https://github.com/webgpu/webgpufundamentals">Fix, Fork, Contribute <!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"></path>
    </g>
</svg>
</a></div>
  </div>
</div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGPU ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <div class="warn">ã“ã®è¨˜äº‹ã¯Gemini Code Assistã«ã‚ˆã£ã¦è‡ªå‹•ç¿»è¨³ã•ã‚Œã¾ã—ãŸã€‚ç¿»è¨³ã«å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€ãŠæ‰‹æ•°ã§ã™ãŒ<a href="https://github.com/webgpu/webgpufundamentals/pulls">ã“ã¡ã‚‰</a>ã‹ã‚‰Pull Requestã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚</div>
<p>ã“ã®è¨˜äº‹ã¯ã€3Dæ•°å­¦ã«ã¤ã„ã¦å­¦ã¶ã“ã¨ã‚’ç›®çš„ã¨ã—ãŸä¸€é€£ã®è¨˜äº‹ã®9ç•ªç›®ã§ã™ã€‚å„è¨˜äº‹ã¯å‰ã®ãƒ¬ãƒƒã‚¹ãƒ³ã‚’åŸºã«ã—ã¦ã„ã‚‹ã®ã§ã€é †ç•ªã«èª­ã‚€ã¨æœ€ã‚‚ç†è§£ã—ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<ol>
<li><a href="webgpu-translation.html">å¹³è¡Œç§»å‹•</a></li>
<li><a href="webgpu-rotation.html">å›è»¢</a></li>
<li><a href="webgpu-scale.html">ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</a></li>
<li><a href="webgpu-matrix-math.html">è¡Œåˆ—æ¼”ç®—</a></li>
<li><a href="webgpu-orthographic-projection.html">æ­£å°„å½±</a></li>
<li><a href="webgpu-perspective-projection.html">é€è¦–æŠ•å½±</a></li>
<li><a href="webgpu-cameras.html">ã‚«ãƒ¡ãƒ©</a></li>
<li><a href="webgpu-matrix-stacks.html">è¡Œåˆ—ã‚¹ã‚¿ãƒƒã‚¯</a></li>
<li><a href="webgpu-scene-graphs.html">ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•</a> â¬… ã“ã“ã§ã™</li>
</ol>
<p>å‰å›ã®è¨˜äº‹ã§ã¯ã€è¡Œåˆ—ã‚¹ã‚¿ãƒƒã‚¯ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¡Œåˆ—ã®å¤‰æ›´ã®ã‚¹ã‚¿ãƒƒã‚¯ã‚’æ§‹ç¯‰ã§ãã€ä»–ã®ã‚‚ã®ã«å¯¾ã—ã¦ç›¸å¯¾çš„ã«ç‰©äº‹ã‚’é…ç½®ã€æ–¹å‘ä»˜ã‘ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã—ãŸã€‚</p>
<p>ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã¯ã€ã‚ã‚‹æ„å‘³ã§ã¯åŒã˜ã‚‚ã®ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ä»£ã‚ã‚Šã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚è¦ªã¨å­ã®ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã—ã€å­ã¯è¦ªã®è¡Œåˆ—ã«åŸºã¥ã„ã¦è¡Œåˆ—ã‚’è¨ˆç®—ã—ã¾ã™ã€‚</p>
<p>ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate notranslate" translate="no">root
 &nbsp;+-cabinet0
 &nbsp;|&nbsp;&nbsp;+-cabinet0-mesh
 &nbsp;|&nbsp;&nbsp;+-drawer0
 &nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer0-drawer-mesh
 &nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer0-handle-mesh
 &nbsp;|&nbsp;&nbsp;+-drawer1
 &nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer1-drawer-mesh
 &nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer1-handle-mesh
 &nbsp;|&nbsp;&nbsp;+-drawer2
 &nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer2-drawer-mesh
 &nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer2-handle-mesh
 &nbsp;|&nbsp;&nbsp;+-drawer3
 &nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-drawer3-drawer-mesh
 &nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-drawer3-handle-mesh
 &nbsp;+-cabinet1
 &nbsp;|&nbsp;&nbsp;...
 &nbsp;+-cabinet2
 &nbsp;|&nbsp;&nbsp;...
 &nbsp;+-cabinet3
 &nbsp;|&nbsp;&nbsp;...
 &nbsp;+-cabinet4
 &nbsp;&nbsp;&nbsp;&nbsp;+-cabinet4-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;+-drawer0
 &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer0-drawer-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer0-handle-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;+-drawer1
 &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer1-drawer-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer1-handle-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;+-drawer2
 &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer2-drawer-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;+-drawer2-handle-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;+-drawer3
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-drawer3-drawer-mesh
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-drawer3-handle-mesh
</pre>
<p>ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã®åˆ©ç‚¹ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚°ãƒ©ãƒ•ã®ãƒãƒ¼ãƒ‰ã¨ã—ã¦æ ¼ç´ã™ã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã§å†å¸°ã™ã‚‹ã“ã¨ãªãã€ã‚°ãƒ©ãƒ•ã®ä»»æ„ã®éƒ¨åˆ†ã‚’ç°¡å˜ã«æ“ä½œã§ãã‚‹ã“ã¨ã§ã™ã€‚</p>
<h2 id="å‰ã®è¨˜äº‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®ä¾‹ã‚’ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ã‚‡ã†ã€‚">å‰ã®è¨˜äº‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®ä¾‹ã‚’ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ã‚‡ã†ã€‚</h2>
<p>æœ€åˆã«å¿…è¦ãªã®ã¯ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’è¡¨ã™ã‚¯ãƒ©ã‚¹ã§ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">class SceneGraphNode {
  constructor(name, source) {
    this.name = name;
    this.children = [];
    this.localMatrix = mat4.identity();
    this.worldMatrix = mat4.identity();
    this.source = source;
  }

  addChild(child) {
    child.setParent(this);
  }

  removeChild(child) {
    child.setParent(null);
  }

  setParent(parent) {
    // è¦ªã‹ã‚‰è‡ªåˆ†ã‚’å‰Šé™¤ã—ã¾ã™
    if (this.parent) {
      const ndx = this.parent.children.indexOf(this);
      if (ndx &gt;= 0) {
        this.parent.children.splice(ndx, 1);
      }
    }

    // æ–°ã—ã„è¦ªã«è‡ªåˆ†ã‚’è¿½åŠ ã—ã¾ã™
    if (parent) {
      parent.children.push(this);
    }
    this.parent = parent;
  }

  updateWorldMatrix(parentWorldMatrix) {
    // ã‚½ãƒ¼ã‚¹ãŒã‚ã‚‹å ´åˆã¯ã€ãã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«è¡Œåˆ—ã‚’æ›´æ–°ã—ã¾ã™ã€‚
    this.source?.getMatrix(this.localMatrix);

    if (parentWorldMatrix) {
      // è¡Œåˆ—ãŒæ¸¡ã•ã‚ŒãŸã®ã§ã€è¨ˆç®—ã‚’è¡Œã„ã¾ã™
      mat4.multiply(parentWorldMatrix, this.localMatrix, this.worldMatrix);
    } else {
      // è¡Œåˆ—ãŒæ¸¡ã•ã‚Œãªã‹ã£ãŸã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚’ãƒ¯ãƒ¼ãƒ«ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã ã‘ã§ã™
      mat4.copy(this.localMatrix, this.worldMatrix);
    }

    // ã™ã¹ã¦ã®å­ã‚’å‡¦ç†ã—ã¾ã™
    const worldMatrix = this.worldMatrix;
    this.children.forEach(function(child) {
      child.updateWorldMatrix(worldMatrix);
    });
  }
}
</pre>
<p>ä¸Šè¨˜ã®<code class="notranslate" translate="no">SceneGraphNode</code>ã¯éå¸¸ã«å˜ç´”ã§ã™ã€‚å„ãƒãƒ¼ãƒ‰ã«ã¯<code class="notranslate" translate="no">children</code>ã®é…åˆ—ãŒã‚ã‚Šã¾ã™ã€‚å­ã‚’è¿½åŠ ãŠã‚ˆã³å‰Šé™¤ã—ãŸã‚Šã€ãƒãƒ¼ãƒ‰ã®è¦ªã‚’è¨­å®šã—ãŸã‚Šã™ã‚‹é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚å„ãƒãƒ¼ãƒ‰ã«ã¯ã€ã“ã®ãƒãƒ¼ãƒ‰ã®ä½ç½®ã€å‘ãã€ã‚¹ã‚±ãƒ¼ãƒ«ã‚’è¦ªã«å¯¾ã—ã¦è¡¨ã™<code class="notranslate" translate="no">localMatrix</code>ãŒã‚ã‚Šã¾ã™ã€‚å„ãƒãƒ¼ãƒ‰ã«ã¯ã€ã“ã®ãƒãƒ¼ãƒ‰ã®ä½ç½®ã€å‘ãã€ã‚¹ã‚±ãƒ¼ãƒ«ã‚’ã€Œãƒ¯ãƒ¼ãƒ«ãƒ‰ã€ã«å¯¾ã—ã¦ã€ã‚ˆã‚Šå…·ä½“çš„ã«ã¯ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã®å¤–éƒ¨ã«å¯¾ã—ã¦è¡¨ã™<code class="notranslate" translate="no">worldMatrix</code>ãŒã‚ã‚Šã¾ã™ã€‚ãã—ã¦æœ€å¾Œã«ã€ãƒãƒ¼ãƒ‰ã¨ãã®ã™ã¹ã¦ã®å­ã®<code class="notranslate" translate="no">worldMatrix</code>ã‚’æ›´æ–°ã™ã‚‹<code class="notranslate" translate="no">updateWorldMatrix</code>ãŒã‚ã‚Šã¾ã™ã€‚å„ãƒãƒ¼ãƒ‰ã«ã¯ã€<code class="notranslate" translate="no">getMatrix</code>é–¢æ•°ã‚’æä¾›ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®<code class="notranslate" translate="no">source</code>ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã€ç‰¹å®šã®ãƒãƒ¼ãƒ‰ã®ãƒ­ãƒ¼ã‚«ãƒ«è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹ã•ã¾ã–ã¾ãªæ–¹æ³•ã‚’æä¾›ã§ãã¾ã™ã€‚</p>
<p>ã‚½ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">class TRS {
  constructor({
    translation = [0, 0, 0],
    rotation = [0, 0, 0],
    scale = [1, 1, 1],
  } = {}) {
     this.translation = new Float32Array(translation);
     this.rotation = new Float32Array(rotation);
     this.scale = new Float32Array(scale);
  }

  getMatrix(dst) {
   mat4.translation(this.translation, dst);
   mat4.rotateX(dst, this.rotation[0], dst);
   mat4.rotateY(dst, this.rotation[1], dst);
   mat4.rotateZ(dst, this.rotation[2], dst);
   mat4.scale(dst, this.scale, dst);
   return dst;
 }
}
</pre>
<p><code class="notranslate" translate="no">TRS</code>ã¯ã€Translationã€Rotationã€Scaleã®ç•¥ã§ã™ã€‚ã“ã‚Œã¯ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã§ãƒ­ãƒ¼ã‚«ãƒ«è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹ä¸€èˆ¬çš„ãªæ–¹æ³•ã§ã™ã€‚å¤šãã®å ´åˆã€ä¸€éƒ¨ã®å®Ÿè£…ã§ã¯ã€Œtranslationã€ã®ä»£ã‚ã‚Šã«ã€Œpositionã€ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€<code class="notranslate" translate="no">getMatrix</code>ã§è¡Œã†ã“ã¨ã¨ä¸€è‡´ã™ã‚‹ãŸã‚ã€ã€Œtranslationã€ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã—ãŸã€‚</p>
<p>ä¸Šè¨˜ã§ç›®ç«‹ã¤ã“ã¨ã®1ã¤ã¯ã€<code class="notranslate" translate="no">this.translation</code>ã€<code class="notranslate" translate="no">this.rotation</code>ã€<code class="notranslate" translate="no">this.scale</code>ã‚’<code class="notranslate" translate="no">new Float32Array(value)</code>ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã™ã€‚<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array"><code class="notranslate" translate="no">Float32Array</code></a>ã®åˆ©ç‚¹ã¯ã€<code class="notranslate" translate="no">set</code>é–¢æ•°ãŒã‚ã‚‹ãŸã‚ã€<code class="notranslate" translate="no">someTRS.translation.set(someNewValue)</code>ã‚’å®Ÿè¡Œã§ãã‚‹ã“ã¨ã§ã™ã€‚</p>
<p><code class="notranslate" translate="no">getMatrix</code>ãŒã€äº‹å®Ÿä¸Šã€æ¬¡ã‚’ä½¿ç”¨ã—ã¦è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate notranslate" translate="no">å¹³è¡Œç§»å‹• * Xå›è»¢ * Yå›è»¢ * Zå›è»¢ * ã‚¹ã‚±ãƒ¼ãƒ«
</pre>
<p>å›è»¢ã‚’é©ç”¨ã™ã‚‹é †åºã‚’å¤‰æ›´ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚XYZã®ä»£ã‚ã‚Šã«ã€ZYXã€YZXãªã©ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<a href="https://google.com/search?quaternion">ã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³</a>ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã‚ã‚Šã€<a href="https://www.youtube.com/watch?v=Idlv83CxP-8">å¹¾ä½•ä»£æ•°</a>ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒã¾ã™ã¾ã™ä¸€èˆ¬çš„ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<p>ã„ãšã‚Œã«ã›ã‚ˆã€ä¸Šè¨˜ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚</p>
<p><code class="notranslate" translate="no">SceneGraphNode</code>ã¨<code class="notranslate" translate="no">TRS</code>ã‚½ãƒ¼ã‚¹ãŒã§ããŸã®ã§ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã—ã¾ã—ã‚‡ã†ã€‚</p>
<p>ã¾ãšã€<code class="notranslate" translate="no">SceneGraphNode</code>ã¨<code class="notranslate" translate="no">TRS</code>ã‚½ãƒ¼ã‚¹ã®ä¸¡æ–¹ã‚’ã„ãã¤ã‹ã®è¦ªã«è¿½åŠ ã™ã‚‹é–¢æ•°ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function addTRSSceneGraphNode(
    name,
    parent,
    trs,
  ) {
    const node = new SceneGraphNode(name, new TRS(trs));
    if (parent) {
      node.setParent(parent);
    }
    return node;
  }
</pre>
<p>ã€Œãƒ¡ãƒƒã‚·ãƒ¥ã€ã‚’ä½œæˆã™ã‚‹é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã‚’ä½•ã¨å‘¼ã¶ã¹ãã‹ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€æç”»ã™ã‚‹ã‚‚ã®ã®ãƒªã‚¹ãƒˆã«ãªã‚Šã¾ã™ã€‚å„ã€Œæç”»ã™ã‚‹ã‚‚ã®ã€ã¯ã€<code class="notranslate" translate="no">SceneGraphNode</code>ã€æç”»ã—ãŸã„ã‚‚ã®ã®é ‚ç‚¹ã€ãŠã‚ˆã³ãã‚Œã‚’æç”»ã™ã‚‹è‰²ã®çµ„ã¿åˆã‚ã›ã«ãªã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const meshes = [];
  function addMesh(node, vertices, color) {
    const mesh = {
      node,
      vertices,
      color,
    };
    meshes.push(mesh);
    return mesh;
  }
</pre>
<p>ã•ã¦ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã—ã‹ãªã„ã®ã§ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã«ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’è¿½åŠ ã—ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã®ã€Œãƒ¡ãƒƒã‚·ãƒ¥ã€ã‚’è¿½åŠ ã™ã‚‹é–¢æ•°ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function addCubeNode(name, parent, trs, color) {
    const node = addTRSSceneGraphNode(name, parent, trs);
    return addMesh(node, cubeVertices, color);
  }
</pre>
<p>ã“ã‚Œã‚‰ãŒè¨­å®šã•ã‚ŒãŸã‚‰ã€ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã—ã¾ã—ã‚‡ã†ã€‚ã¾ãšã€ã€Œãƒ«ãƒ¼ãƒˆã€ãƒãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ«ãƒ¼ãƒˆã«ã¯ã€Œã‚½ãƒ¼ã‚¹ã€ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const root = new SceneGraphNode('root');
</pre>
<p>æ¬¡ã«ã€ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const root = new SceneGraphNode('root');
+  // ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã‚’è¿½åŠ ã—ã¾ã™
+  for (let cabinetNdx = 0; cabinetNdx &lt; kNumCabinets; ++cabinetNdx) {
+    addCabinet(root, cabinetNdx);
+  }
</pre>
<p><code class="notranslate" translate="no">addCabinet</code>ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function addCabinet(parent, cabinetNdx) {
    const cabinetName = `cabinet${cabinetNdx}`;

    // ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆå…¨ä½“ã«ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
    const cabinet = addTRSSceneGraphNode(
      cabinetName, parent, {
         translation: [cabinetNdx * kCabinetSpacing, 0, 0],
       });

    // ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æŒã¤ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
    const kCabinetSize = [
      kDrawerSize[kWidth] + 6,
      kDrawerSpacing * kNumDrawersPerCabinet + 6,
      kDrawerSize[kDepth] + 4,
    ];
    addCubeNode(
      `${cabinetName}-mesh`, cabinet, {
        scale: kCabinetSize,
      }, kCabinetColor);

    // å¼•ãå‡ºã—ã‚’è¿½åŠ ã—ã¾ã™
    for (let drawerNdx = 0; drawerNdx &lt; kNumDrawersPerCabinet; ++drawerNdx) {
      addDrawer(cabinet, drawerNdx);
    }
  }
</pre>
<p>ãã—ã¦ã€<code class="notranslate" translate="no">addDrawer</code>ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function addDrawer(parent, drawerNdx) {
    const drawerName = `drawer${drawerNdx}`;

    // å¼•ãå‡ºã—å…¨ä½“ã«ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
    const drawer = addTRSSceneGraphNode(
      drawerName, parent, {
        translation: [3, drawerNdx * kDrawerSpacing + 5, 1],
      });
    animNodes.push(drawer);

    // å¼•ãå‡ºã—ã‚­ãƒ¥ãƒ¼ãƒ–ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æŒã¤ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚
    addCubeNode(`${drawerName}-drawer-mesh`, drawer, {
      scale: kDrawerSize,
    }, kDrawerColor);

    // ãƒãƒ³ãƒ‰ãƒ«ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æŒã¤ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
    addCubeNode(`${drawerName}-handle-mesh`, drawer, {
      translation: kHandlePosition,
      scale: kHandleSize,
    }, kHandleColor);
  }
</pre>
<p>ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ãŒã§ããŸã®ã§ã€ãƒ¬ãƒ³ãƒ€ãƒ¼é–¢æ•°ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-    stack.save();
-    stack.rotateY(settings.baseRotation);
-    stack.translate([(kNumCabinets - 0.5) * kCabinetSpacing * -0.5, 0, 0]);
-    objectNdx = 0;
-    const ctx = { pass, stack, viewProjectionMatrix };
-    drawCabinets(ctx, kNumCabinets);
-    stack.restore();
+    const ctx = { pass, viewProjectionMatrix };
+    root.updateWorldMatrix();
+    for (const mesh of meshes) {
+      drawMesh(ctx, mesh);
+    }
</pre>
<p>ãã—ã¦ã€ã‚«ãƒ¡ãƒ©ã‚³ãƒ¼ãƒ‰ã‚’å¾®èª¿æ•´ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const settings = {
-    baseRotation: 0,
+    cameraRotation: 0,
  };

  const radToDegOptions = { min: -180, max: 180, step: 1, converters: GUI.converters.radToDeg };

  const gui = new GUI();
  gui.onChange(render);
-  gui.add(settings, 'baseRotation', radToDegOptions);
+  gui.add(settings, 'cameraRotation', radToDegOptions);

...

  function render() {
    ...

-    const eye = [0, 80, 200];
-    const target = [0, 80, 0];
-    const up = [0, 1, 0];
-
-    // ãƒ“ãƒ¥ãƒ¼è¡Œåˆ—ã‚’è¨ˆç®—ã—ã¾ã™
-    const viewMatrix = mat4.lookAt(eye, target, up);
+    // ã‚«ãƒ¡ãƒ©è¡Œåˆ—ã‚’è¨ˆç®—ã—ã¾ã™
+    const cameraMatrix = mat4.identity();
+    mat4.translate(cameraMatrix, [120, 100, 0], cameraMatrix);
+    mat4.rotateY(cameraMatrix, settings.cameraRotation, cameraMatrix);
+    mat4.translate(cameraMatrix, [60, 0, 300], cameraMatrix);
+
+    // ãƒ“ãƒ¥ãƒ¼è¡Œåˆ—ã‚’è¨ˆç®—ã—ã¾ã™
+    const viewMatrix = mat4.inverse(cameraMatrix);

    // ãƒ“ãƒ¥ãƒ¼è¡Œåˆ—ã¨å°„å½±è¡Œåˆ—ã‚’çµ„ã¿åˆã‚ã›ã¾ã™
    const viewProjectionMatrix = mat4.multiply(projection, viewMatrix);
</pre>
<p>ãã—ã¦ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ã—ã¦åŒã˜ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-scene-graphs-file-cabinets.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-scene-graphs-file-cabinets.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<h2 id="guiã®è¿½åŠ "><a id="a-gui"></a>GUIã®è¿½åŠ </h2>
<p>ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã®ä¸»ãªãƒã‚¤ãƒ³ãƒˆã¯ã€ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ãŸã‚ã€æ“ä½œã§ãã‚‹ã“ã¨ã§ã™ã€‚ã‚°ãƒ©ãƒ•ã‚’èª¿æ•´ãŠã‚ˆã³å¾®èª¿æ•´ã™ã‚‹ãŸã‚ã®UIã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<p>ã¾ãšã€å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒ«ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const settings = {
-    cameraRotation: 0,
+    cameraRotation: degToRad(-45),
+    translation: new Float32Array([0, 0, 0]),
+    rotation: new Float32Array([0, 0, 0]),
+    scale: new Float32Array([1, 1, 1]),
  };

-  const radToDegOptions = { min: -180, max: 180, step: 1, converters: GUI.converters.radToDeg };
+  const radToDegOptions = { min: -90, max: 90, step: 1, converters: GUI.converters.radToDeg };
+  const cameraRadToDegOptions = { min: -180, max: 180, step: 1, converters: GUI.converters.radToDeg };

  const gui = new GUI();
  gui.onChange(render);
-  gui.add(settings, 'cameraRotation', radToDegOptions);
+  gui.add(settings, 'cameraRotation', cameraRadToDegOptions);
+  const trsFolder = gui.addFolder('orientation');
+  trsFolder.add(settings.translation, '0', -200, 200, 1).name('translation x');
+  trsFolder.add(settings.translation, '1', -200, 200, 1).name('translation y');
+  trsFolder.add(settings.translation, '2', -200, 200, 1).name('translation z');
+  trsFolder.add(settings.rotation, '0', radToDegOptions).name('rotation x');
+  trsFolder.add(settings.rotation, '1', radToDegOptions).name('rotation y');
+  trsFolder.add(settings.rotation, '2', radToDegOptions).name('rotation z');
+  trsFolder.add(settings.scale, '0', 0.1, 100).name('scale x');
+  trsFolder.add(settings.scale, '1', 0.1, 100).name('scale y');
+  trsFolder.add(settings.scale, '2', 0.1, 100).name('scale z');
</pre>
<p>æ¬¡ã«ã€ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã®ãƒãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">+  let currentNode;
+  function updateCurrentNodeFromSettings() {
+    const source = currentNode.source;
+    source.translation.set(settings.translation);
+    source.rotation.set(settings.rotation);
+    source.scale.set(settings.scale);
+  }
</pre>
<p>ãã—ã¦ã€å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã¾ãŸã¯ã‚¹ã‚±ãƒ¼ãƒ«ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã„ãšã‚Œã‹ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«ã“ã‚Œã‚’å‘¼ã³å‡ºã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const gui = new GUI();
  gui.onChange(render);
  gui.add(settings, 'cameraRotation', cameraRadToDegOptions);
  const trsFolder = gui.addFolder('orientation');
+  trsFolder.onChange(updateCurrentNodeFromSettings);
  ...
</pre>
<p>æ¬¡ã«ã€ãƒãƒ¼ãƒ‰ã‚’é¸æŠã™ã‚‹æ–¹æ³•ãŒå¿…è¦ãªã®ã§ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’ã‚¦ã‚©ãƒ¼ã‚¯ã—ã€å„ãƒãƒ¼ãƒ‰ã«ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">import GUI from '../3rdparty/muigui-0.x.module.js';
+import { addButtonLeftJustified } from './resources/js/gui-helpers.js';

...
  let currentNode;
  function updateCurrentNodeFromSettings() {
    const source = currentNode.source;
    source.translation.set(settings.translation);
    source.rotation.set(settings.rotation);
    source.scale.set(settings.scale);
  }

+  function updateCurrentNodeGUI() {
+    const source = currentNode.source;
+    settings.translation.set(source.translation);
+    settings.rotation.set(source.rotation);
+    settings.scale.set(source.scale);
+    trsFolder.updateDisplay();
+  }
+
+  function setCurrentSceneGraphNode(node) {
+    currentNode = node;
+    trsFolder.name(`orientation: ${node.name}`);
+    updateCurrentNodeGUI();
+  }
+
+  // \u00a0ã¯æ”¹è¡Œã—ãªã„ã‚¹ãƒšãƒ¼ã‚¹ã§ã™ã€‚
+  const threeSpaces = '\u00a0\u00a0\u00a0';
+  const barTwoSpaces = '\u00a0|\u00a0';
+  const plusDash = '\u00a0+-';
+  // GUIã«ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€é©åˆ‡ãª
+  // ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ã—ã¦ã€æ¬¡ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
+  //
+  // +-root
+  // | +-child
+  // | | +-child
+  // | +-child
+  // +-child
+  function addSceneGraphNodeToGUI(gui, node, last, prefix) {
+    if (node.source instanceof TRS) {
+      const label = `${prefix === undefined ? '' : `${prefix}${plusDash}`}${node.name}`;
+      addButtonLeftJustified(
+        gui, label, () =&gt; setCurrentSceneGraphNode(node));
+    }
+    const childPrefix = prefix === undefined
+      ? ''
+      : `${prefix}${last ? threeSpaces : barTwoSpaces}`;
+    node.children.forEach((child, i) =&gt; {
+      const childLast = i === node.children.length - 1;
+      addSceneGraphNodeToGUI(gui, child, childLast, childPrefix);
+    });
+  }

  const gui = new GUI();
  ...
+  const nodesFolder = gui.addFolder('nodes');
+  addSceneGraphNodeToGUI(nodesFolder, root);
+
+  setCurrentSceneGraphNode(root.children[0]);
</pre>
<p>ä¸Šè¨˜ã§ã¯ã€<code class="notranslate" translate="no">TRS</code>ã‚½ãƒ¼ã‚¹ã‚’æŒã¤å„ãƒãƒ¼ãƒ‰ã«ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã‚‹ã¨ã€<code class="notranslate" translate="no">setCurrentSceneGraphNode</code>ãŒå‘¼ã³å‡ºã•ã‚Œã€ãã®ãƒœã‚¿ãƒ³ã®ãƒãƒ¼ãƒ‰ãŒæ¸¡ã•ã‚Œã¾ã™ã€‚<code class="notranslate" translate="no">setCurrentSceneGraphNode</code>ã¯ãƒ•ã‚©ãƒ«ãƒ€åã‚’æ›´æ–°ã—ã€æ¬¡ã«<code class="notranslate" translate="no">updateCurrentNodeGUI</code>ã‚’å‘¼ã³å‡ºã—ã¦ã€æ–°ã—ãé¸æŠã•ã‚ŒãŸãƒãƒ¼ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ã§<code class="notranslate" translate="no">settings</code>ã‚’æ›´æ–°ã—ã¾ã™ã€‚</p>
<p>ã“ã‚Œã¯æ©Ÿèƒ½ã—ã¾ã™ãŒã€UIãŒå°ã•ãªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ã¯å°‘ã—ä¹±é›‘ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã€ã„ãã¤ã‹ã®èª¿æ•´ã‚’æ¬¡ã«ç¤ºã—ã¾ã™ã€‚</p>
<ol>
<li>
<p>å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒ«ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚</p>
<p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®å ´åˆã€å„ãƒãƒ¼ãƒ‰ã§å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒ«ã®9ã¤ã®è¨­å®šã®ã„ãšã‚Œã‹ã‚’è¨­å®šã§ãã¾ã™ãŒã€æœ¬å½“ã«é‡è¦ãªã®ã¯ã€Œå¹³è¡Œç§»å‹•zã€ã ã‘ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å¹³è¡Œç§»å‹•ä»¥å¤–ã®ã™ã¹ã¦ã‚’éè¡¨ç¤ºã«ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no"> const settings = {
   cameraRotation: degToRad(-45),
+   showAllTRS: false,
   translation: new Float32Array([0, 0, 0]),
   rotation: new Float32Array([0, 0, 0]),
   scale: new Float32Array([1, 1, 1]),
 };

 const gui = new GUI();
 gui.onChange(render);
 gui.add(settings, 'cameraRotation', cameraRadToDegOptions);
+ gui.add(settings, 'showAllTRS').onChange(showTRS);
 const trsFolder = gui.addFolder('orientation');
 trsFolder.onChange(updateCurrentNodeFromSettings);
+ const trsControls = [
*   trsFolder.add(settings.translation, '0', -200, 200, 1).name('translation x'),
*   trsFolder.add(settings.translation, '1', -200, 200, 1).name('translation y'),
*   trsFolder.add(settings.translation, '2', -200, 200, 1).name('translation z'),
*   trsFolder.add(settings.rotation, '0', radToDegOptions).name('rotation x'),
*   trsFolder.add(settings.rotation, '1', radToDegOptions).name('rotation y'),
*   trsFolder.add(settings.rotation, '2', radToDegOptions).name('rotation z'),
*   trsFolder.add(settings.scale, '0', 0.1, 100).name('scale x'),
*   trsFolder.add(settings.scale, '1', 0.1, 100).name('scale y'),
*   trsFolder.add(settings.scale, '2', 0.1, 100).name('scale z'),
+ ];
const nodesFolder = gui.addFolder('nodes');
addSceneGraphNodeToGUI(nodesFolder, root);

+const alwaysShow = new Set([0, 1, 2]);
+function showTRS(show) {
+  trsControls.forEach((trs, i) =&gt; {
+    trs.show(show || alwaysShow.has(i));
+  });
+}
+showTRS(false);
</pre>
<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒ«ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’é…åˆ—ã«åé›†ã—ã€ã™ã¹ã¦ã¾ãŸã¯æœ€åˆã®3ã¤ã®ã¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</li>
<li>
<p>ãƒ¡ãƒƒã‚·ãƒ¥ã‚’è¡¨ç¤ºã—ãªã„</p>
<p>ã‚°ãƒ©ãƒ•ã«ã¯ã€å„ã‚­ãƒ¥ãƒ¼ãƒ–ã®ã€Œ-meshã€ãƒãƒ¼ãƒ‰ãŒã‚ã‚Šã€ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã‚„å¼•ãå‡ºã—ã‚’ç§»å‹•ã™ã‚‹ãŸã‚ã«å®Ÿéš›ã«ç§»å‹•ã™ã‚‹å¿…è¦ã¯ãªã„ã®ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§éè¡¨ç¤ºã«ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  // \u00a0ã¯æ”¹è¡Œã—ãªã„ã‚¹ãƒšãƒ¼ã‚¹ã§ã™ã€‚
  const threeSpaces = '\u00a0\u00a0\u00a0';
  const barTwoSpaces = '\u00a0|\u00a0';
  const plusDash = '\u00a0+-';
  // GUIã«ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€é©åˆ‡ãª
  // ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ã—ã¦ã€æ¬¡ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
  //
  // +-root
  // | +-child
  // | | +-child
  // | +-child
  // +-child
  function addSceneGraphNodeToGUI(gui, node, last, prefix) {
+   const nodes = [];
    if (node.source instanceof TRS) {
      const label = `${prefix === undefined ? '' : `${prefix}${plusDash}`}${node.name}`;
-      addButtonLeftJustified(gui, label, () =&gt; setCurrentSceneGraphNode(node));
+      nodes.push(addButtonLeftJustified(
+        gui, label, () =&gt; setCurrentSceneGraphNode(node)));
    const childPrefix = prefix === undefined
      ? ''
      : `${prefix}${last ? threeSpaces : barTwoSpaces}`;
-    node.children.forEach((child, i) =&gt; {
+    nodes.push(...node.children.map((child, i) =&gt; {
*      const childLast = i === node.children.length - 1;
-      addSceneGraphNodeToGUI(gui, child, childLast, childPrefix);
+      return addSceneGraphNodeToGUI(gui, child, childLast, childPrefix);
*    }));
+    return nodes.flat();
  }

  const settings = {
    cameraRotation: degToRad(-45),
+    showMeshNodes: false,
    showAllTRS: false,
    translation: new Float32Array([0, 0, 0]),
    rotation: new Float32Array([0, 0, 0]),
    scale: new Float32Array([1, 1, 1]),
  };

  const gui = new GUI();
  gui.onChange(render);
  gui.add(settings, 'cameraRotation', cameraRadToDegOptions);
+  gui.add(settings, 'showMeshNodes').onChange(showMeshNodes);
  gui.add(settings, 'showAllTRS').onChange(showTRS);

   ...

-  const nodesFolder = gui.addFolder('nodes');
  addSceneGraphNodeToGUI(nodesFolder, root);
+  const nodeButtons = addSceneGraphNodeToGUI(nodesFolder, root);

+ function showMeshNodes(show) {
+   for (const child of nodeButtons) {
+     if (child.domElement.textContent.includes('mesh')) {
+       child.show(show);
+     }
+   }
+ }
+ showMeshNodes(false);
</pre>
</li>
</ol>
<p>ã€Œå¼•ãå‡ºã—ã€ã‚’é¸æŠã—ã€ã€Œå¹³è¡Œç§»å‹•zã€ã‚’èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-scene-graphs-file-cabinets-w-gui.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-scene-graphs-file-cabinets-w-gui.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<p>ã”è¦§ã®ã¨ãŠã‚Šã€å„ãƒãƒ¼ãƒ‰ã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ãŸã‚ã€å€‹ã€…ã®ãƒãƒ¼ãƒ‰ã®ä½ç½®ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒ«ã‚’ç°¡å˜ã«å¤‰æ›´ã§ãã¾ã™ã€‚</p>
<h2 id="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³"><a id="a-animate"></a>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h2>
<p>æ¥½ã—ã¿ã®ãŸã‚ã«ã€å¼•ãå‡ºã—ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã—ã¾ã—ã‚‡ã†ã€‚</p>
<p>ã¾ãšã€å¼•ãå‡ºã—ãƒãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const animNodes = [];

  function addDrawer(parent, drawerNdx) {
    const drawerName = `drawer${drawerNdx}`;

    // å¼•ãå‡ºã—å…¨ä½“ã«ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
    const drawer = addTRSSceneGraphNode(
      drawerName, parent, {
        translation: [3, drawerNdx * kDrawerSpacing + 5, 1],
      });
+    animNodes.push(drawer);

    // å¼•ãå‡ºã—ã‚­ãƒ¥ãƒ¼ãƒ–ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æŒã¤ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚
    addCubeNode(`${drawerName}-drawer-mesh`, drawer, {
      scale: kDrawerSize,
    }, kDrawerColor);

    // ãƒãƒ³ãƒ‰ãƒ«ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æŒã¤ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
    addCubeNode(`${drawerName}-handle-mesh`, drawer, {
      translation: kHandlePosition,
      scale: kHandleSize,
    }, kHandleColor);
  }
</pre>
<p>æ¬¡ã«ã€æ™‚é–“ã«åŸºã¥ã„ã¦å¼•ãå‡ºã—ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const lerp = (a, b, t) =&gt; a + (b - a) * t;

  function animate(time) {
    animNodes.forEach((node, i) =&gt; {
      const source = node.source;
      const t = time + i * 1;
      const l = Math.sin(t) * 0.5 + 0.5;
      source.translation[2] = lerp(1, kDrawerSize[2] * 0.8, l);
    });
  }
</pre>
<p>ãƒ¬ãƒ³ãƒ€ãƒ¼ ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚ã¾ã ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ•ãƒ¬ãƒ¼ãƒ ãŒã¾ã ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ãªã„å ´åˆã«ã®ã¿ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">+  // ã¾ã ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„å ´åˆã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¾ã™ã€‚
+  let renderRequestId;
+  function requestRender() {
+    if (!renderRequestId) {
+      renderRequestId = requestAnimationFrame(render);
+    }
+  }

  function render() {
+    renderRequestId = undefined;
    ...

  }
</pre>
<p>ãã—ã¦ã€<code class="notranslate" translate="no">render</code>ã‚’å‘¼ã³å‡ºã—ã¦ã„ãŸå ´æ‰€ã‚’æ›´æ–°ã—ã¦ã€<code class="notranslate" translate="no">requestRender</code>ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const gui = new GUI();
-  gui.onChange(render);
+  gui.onChange(requestRender);
  gui.add(settings, 'cameraRotation', cameraRadToDegOptions);

  ...

  const observer = new ResizeObserver(entries =&gt; {
    for (const entry of entries) {
      const canvas = entry.target;
      const width = entry.contentBoxSize[0].inlineSize;
      const height = entry.contentBoxSize[0].blockSize;
      canvas.width = Math.max(1, Math.min(width, device.limits.maxTextureDimension2D));
      canvas.height = Math.max(1, Math.min(height, device.limits.maxTextureDimension2D));
      // å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
-      render();
+      requestRender();
    }
  });
  observer.observe(canvas);
</pre>
<p>æœ€å¾Œã«ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ªãƒ³/ã‚ªãƒ•ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const settings = {
+    animate: false,
    showMeshNodes: false,
    showAllTRS: false,
    translation: new Float32Array([0, 0, 0]),
    rotation: new Float32Array([0, 0, 0]),
    scale: new Float32Array([1, 1, 1]),
    cameraRotation: degToRad(-45),
  };

  const gui = new GUI();
  gui.onChange(requestRender);
  gui.add(settings, 'cameraRotation', cameraRadToDegOptions);
+  gui.add(settings, 'animate').onChange(v =&gt; {
+    trsFolder.enable(!v);
+  });
  gui.add(settings, 'showMeshNodes').onChange(showMeshNodes);
  gui.add(settings, 'showAllTRS').onChange(showTRS);

  ...

+  let then;
+  let time = 0;
+  let wasRunning = false;
  function render() {
    renderRequestId = undefined;

  ...

-      const isRunning = settings.animate;
+      const isRunning = settings.animate || shots.length;
      const now = performance.now() * 0.001;
+      const deltaTime = wasRunning ? now - then : 0;
+      then = now;

      if (isRunning) {
        time += deltaTime;
      }
+      wasRunning = isRunning;

      if (settings.animate) {
        animate(time);
        updateCurrentNodeGUI();
        requestRender();
      }

+      processShots(now, deltaTime);
  }
</pre>
<p>ä¸Šè¨˜ã®è¤‡é›‘ãªç‚¹ã¯ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹å ´åˆã«ã®ã¿ã‚¯ãƒ­ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ãŸã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€å‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§<code class="notranslate" translate="no">wasRunning</code>ã ã£ãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ãã†ã§ãªã„å ´åˆã¯ã€<code class="notranslate" translate="no">deltaTime</code>ã‚’0ã«è¨­å®šã—ã¾ã™ã€‚ãã†ã™ã‚Œã°ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã—ã¦ã„ãªã‹ã£ãŸæ™‚é–“ã ã‘ã‚¯ãƒ­ãƒƒã‚¯ãŒé€²ã‚€ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã—ã¦ã„ã‚‹å ´åˆã¯ã€å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒ«ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ç„¡åŠ¹ã«ã—ã¾ã™ã€‚</p>
<p>æœ€å¾Œã«ã€<code class="notranslate" translate="no">settings.animate</code>ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€åˆ¥ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¾ã™ã€‚GUIã‚³ãƒ¼ãƒ‰ã¯ã€å¤‰æ›´æ™‚ã«ã™ã§ã«<code class="notranslate" translate="no">requestRender</code>ã‚’å‘¼ã³å‡ºã™ãŸã‚ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é–‹å§‹ã—ã€<code class="notranslate" translate="no">settings.animate</code>ãŒtrueã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€åˆ¥ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-scene-graphs-file-cabinets-w-animation.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-scene-graphs-file-cabinets-w-animation.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<p>ã€Œå¼•ãå‡ºã—ã€ã‚’é¸æŠã—ã€ã€Œå¹³è¡Œç§»å‹•zã€ã‚’èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<h2 id="æ‰‹ã®ä½œæˆ"><a id="a-hand"></a>æ‰‹ã®ä½œæˆ</h2>
<p>æ‰‹ã®æ–°ã—ã„ä¾‹ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚ç°¡å˜ã«ã™ã‚‹ãŸã‚ã«ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã«å›ºåŸ·ã—ã¾ã™ã€‚</p>
<p>ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ãŒã©ã®ã‚ˆã†ã«ãªã‚‹ã‹ã®å›³ã‚’æ¬¡ã«ç¤ºã—ã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate notranslate" translate="no">oot
 +-wrist
    +-palm
    |  +-thumb
    |  |  +-thumb-mesh
    |  |  +-thumb-1
    |  |     +-thumb-1-mesh
    |  +-index finger
    |  |  +-index finger-mesh
    |  |  +-index finger-1
    |  |     +-index finger-1-mesh
    |  |     +-index finger-2
    |  |        +-index finger-2-mesh
    |  +-middle finger
    |  |  +-middle finger-mesh
    |  |  +-middle finger-1
    |  |     +-middle finger-1-mesh
    |  |     +-middle finger-2
    |  |        +-middle finger-2-mesh
    |  +-ring finger
    |  |  +-ring finger-mesh
    |  |  +-ring finger-1
    |  |     +-ring finger-1-mesh
    |  |     +-ring finger-2
    |  |        +-ring finger-2-mesh
    |  +-pinky
    |     +-pinky-mesh
    |     +-pinky-1
    |        +-pinky-1-mesh
    |        +-pinky-2
    |           +-pinky-2-mesh
    +-palm-mesh
</pre>
<p>ã¾ãšã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®é ‚ç‚¹ã‚’ç§»å‹•ã—ã¦ã€XZå¹³é¢ã®ä¸Šã«ä¸­å¤®ã«é…ç½®ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¯ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã«ã•ã‚‰ã«ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã‹ã€å„ã€Œ-meshã€ãƒãƒ¼ãƒ‰ã«é©ç”¨ã™ã‚‹ã“ã¨ã§å®Ÿè¡Œã§ãã¾ã™ãŒã€é ‚ç‚¹è‡ªä½“ã§å®Ÿè¡Œã™ã‚‹æ–¹ãŒã™ã£ãã‚Šã—ã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">function createCubeVertices() {
  const positions = [
    // å·¦
-    0, 0,  0,
-    0, 0, -1,
-    0, 1,  0,
-    0, 1, -1,
+   -0.5, 0,  0.5,
+   -0.5, 0, -0.5,
+   -0.5, 1,  0.5,
+   -0.5, 1, -0.5,

    // å³
-    1, 0,  0,
-    1, 0, -1,
-    1, 1,  0,
-    1, 1, -1,
+    0.5, 0,  0.5,
+    0.5, 0, -0.5,
+    0.5, 1,  0.5,
+    0.5, 1, -0.5,
  ];

  ...
</pre>
<p>æ¬¡ã«ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã«é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã€ã“ã‚Œã«ç½®ãæ›ãˆã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">+  const kWhite = [1, 1, 1, 1];
+  function addFinger(name, parent, segments, segmentHeight, trs) {
+    const nodes = [];
+    const baseName = name;
+    for (let i = 0; i &lt; segments; ++i) {
+      const node = addTRSSceneGraphNode(name, parent, trs);
+      nodes.push(node);
+      const meshNode = addTRSSceneGraphNode(`${name}-mesh`, node, { scale: [10, segmentHeight, 10] });
+      addMesh(meshNode, cubeVertices, kWhite);
+      parent = node;
+      name = `${baseName}-${i + 1}`;
+      trs = {
+        translation: [0, segmentHeight, 0],
+        rotation: [degToRad(15), 0, 0],
+      };
+    }
+    return nodes;
+  }

  const root = new SceneGraphNode('root');
+  const wrist = addTRSSceneGraphNode('wrist', root);
+  const palm = addTRSSceneGraphNode('palm', wrist, { translation: [0, 100, 0] });
+  const palmMesh = addTRSSceneGraphNode('palm-mesh', wrist, { scale: [100, 100, 10] });
+  addMesh(palmMesh, cubeVertices, kWhite);
+  const rotation = [degToRad(15), 0, 0];
+  const animNodes = [
+    wrist,
+    palm,
+    ...addFinger('thumb',         palm, 2, 20, { translation: [-50, 0, 0], rotation }),
+    ...addFinger('index finger',  palm, 3, 30, { translation: [-25, 0, 0], rotation }),
+    ...addFinger('middle finger', palm, 3, 35, { translation: [ -0, 0, 0], rotation }),
+    ...addFinger('ring finger',   palm, 3, 33, { translation: [ 25, 0, 0], rotation }),
+    ...addFinger('pinky',         palm, 3, 25, { translation: [ 45, 0, 0], rotation }),
+  ];
</pre>
<p>æ‰‹é¦–ã‚’ä½œæˆã—ã€ãã‚Œã«æ‰‹ã®ã²ã‚‰ã¨æ‰‹ã®ã²ã‚‰ãƒ¡ãƒƒã‚·ãƒ¥ã‚’å–ã‚Šä»˜ã‘ã¾ã™ã€‚æ‰‹ã®ã²ã‚‰ã«ã€<code class="notranslate" translate="no">addFinger</code>ã‚’ä½¿ç”¨ã—ã¦5æœ¬ã®æŒ‡ã‚’å–ã‚Šä»˜ã‘ã¾ã™ã€‚<code class="notranslate" translate="no">addFinger</code>ã¯ã€ç‰¹å®šã®é•·ã•ã®æŒ‡ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<blockquote>
<p>ã¯ã„ã€ã“ã‚Œã¯äººé–“ã®æ‰‹ã¨ã¯ã¾ã£ãŸãç•°ãªã‚Šã¾ã™ğŸ˜‚</p>
</blockquote>
<p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã®å ´åˆã€<code class="notranslate" translate="no">translation z</code>ã®ã¿ã‚’æ°—ã«ã—ã¾ã—ãŸãŒã€æ‰‹ã§æœ€ã‚‚é‡è¦ãªå¤‰æ›ã¯<code class="notranslate" translate="no">rotation x</code>ãªã®ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’èª¿æ•´ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-  const alwaysShow = new Set([0, 1, 2]);
+  const alwaysShow = new Set([0, 1, 3]);
  function showTRS(show) {
    trsControls.forEach((trs, i) =&gt; {
      trs.show(show || alwaysShow.has(i));
    });
  }
  showTRS(false);
</pre>
<p>æ‰‹ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€zã‚’å¹³è¡Œç§»å‹•ã™ã‚‹ä»£ã‚ã‚Šã«xã‚’å›è»¢ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function animate(time) {
    animNodes.forEach((node, i) =&gt; {
      const source = node.source;
-      const t = time + i * 1;
+      const t = time + i * 0.1;
      const l = Math.sin(t) * 0.5 + 0.5;
-      source.translation[2] = lerp(1, kDrawerSize[2] * 0.8, l);
+      source.rotation[0] = lerp(0, Math.PI * 0.25, l);
    });
  }
</pre>
<p>æœ€å¾Œã«ã€ã‚«ãƒ¡ãƒ©ã‚’ã‚ãšã‹ã«èª¿æ•´ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">    // ã‚«ãƒ¡ãƒ©è¡Œåˆ—ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
    const cameraMatrix = mat4.identity();
-    mat4.translate(cameraMatrix, [120, 100, 0], cameraMatrix);
+    mat4.translate(cameraMatrix, [100, 100, 0], cameraMatrix);
    mat4.rotateY(cameraMatrix, settings.cameraRotation, cameraMatrix);
-    mat4.translate(cameraMatrix, [60, 0, 300], cameraMatrix);
+    mat4.translate(cameraMatrix, [100, 0, 300], cameraMatrix);
</pre>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-scene-graphs-hand.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-scene-graphs-hand.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<p>äººå·®ã—æŒ‡ã®1ã¤ã‚’é¸æŠã—ã€ã€Œå›è»¢xã€ã‚’èª¿æ•´ã—ã¦ã‹ã‚‰ã€ã€Œç™ºå°„ï¼ã€ã‚’æŠ¼ã—ã¾ã™ã€‚ã¾ãŸã¯ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã«ã€Œç™ºå°„ï¼ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p>
<h2 id="äººå·®ã—æŒ‡ã‹ã‚‰ç™ºå°„ä½“ã‚’ç™ºå°„ã—ã¾ã—ã‚‡ã†ã€‚"><a id="a-shoot"></a>äººå·®ã—æŒ‡ã‹ã‚‰ç™ºå°„ä½“ã‚’ç™ºå°„ã—ã¾ã—ã‚‡ã†ã€‚</h2>
<p>ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã®ã‚‚ã†1ã¤ã®åˆ©ç‚¹ã¯ã€ã‚°ãƒ©ãƒ•å†…ã®ä»»æ„ã®ãƒãƒ¼ãƒ‰ã®ä½ç½®ã¨å‘ãã‚’ç°¡å˜ã«è¦æ±‚ã§ãã‚‹ã“ã¨ã§ã™ã€‚</p>
<p>ã—ãŸãŒã£ã¦ã€äººå·®ã—æŒ‡ã‹ã‚‰ç™ºå°„ã™ã‚‹ã«ã¯ã€æŒ‡ã®å…ˆç«¯ã®ãƒãƒ¼ãƒ‰ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>å¤šãã®ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•APIã«ã¯ã€åå‰ã§ãƒãƒ¼ãƒ‰ã‚’æ¤œç´¢ã™ã‚‹é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚ç§ãŸã¡ã®ã‚‚ã®ã«è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">class SceneGraphNode {
  constructor(name, source) {
    this.name = name;
    this.children = [];
    this.localMatrix = mat4.identity();
    this.worldMatrix = mat4.identity();
    this.source = source;
  }

+  find(name) {
+    if (this.name === name) {
+      return this;
+    }
+    for (const child of this.children) {
+      const found = child.find(name);
+      if (found) {
+        return found;
+      }
+    }
+    return undefined;
+  }

  ...
}
</pre>
<p>ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹ã¨ã€åå‰ã§äººå·®ã—æŒ‡ã®æœ€å¾Œã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®ãƒãƒ¼ãƒ‰ã¯ã€äººå·®ã—æŒ‡ã®æœ€å¾Œã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®åŸºéƒ¨ã€ã¤ã¾ã‚Šå›è»¢ã™ã‚‹ç‚¹ã‚’è¡¨ã—ã€å…ˆç«¯ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€å®Ÿéš›ã«å…ˆç«¯ã‚’è¡¨ã™æœ€å¾Œã®æŒ‡ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®å­ã¨ã—ã¦åˆ¥ã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const root = new SceneGraphNode('root');
  const wrist = addTRSSceneGraphNode('wrist', root);
  const palm = addTRSSceneGraphNode('palm', wrist, { translation: [0, 100, 0] });
  const palmMesh = addTRSSceneGraphNode('palm-mesh', wrist, { scale: [100, 100, 10] });
  addMesh(palmMesh, cubeVertices, kWhite);
  const rotation = [degToRad(15), 0, 0];
  const animNodes = [
    wrist,
    palm,
    ...addFinger('thumb',         palm, 2, 20, { translation: [-50, 0, 0], rotation }),
    ...addFinger('index finger',  palm, 3, 30, { translation: [-25, 0, 0], rotation }),
    ...addFinger('middle finger', palm, 3, 35, { translation: [ -0, 0, 0], rotation }),
    ...addFinger('ring finger',   palm, 3, 33, { translation: [ 25, 0, 0], rotation }),
    ...addFinger('pinky',         palm, 3, 25, { translation: [ 45, 0, 0], rotation }),
  ];
+  const fingerTip = addTRSSceneGraphNode('finger-tip', root.find('index finger-2'), { translation: [0, 30, 0] });
</pre>
<p>æ¬¡ã«ã€ç™ºå°„ä½“ãŒå¿…è¦ã§ã™ã€‚<a href="webgpu-matrix-stacks.html">å‰ã®è¨˜äº‹</a>ã§è£…é£¾å“ç”¨ã«ä½œæˆã—ãŸå††éŒã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const cubeVertices = createVertices(createCubeVertices(), 'cube');
+  const shotVertices = createVertices(createConeVertices({
+    radius: 10,
+    height: 20,
+  }), 'shot');
</pre>
<p>æ¬¡ã«ã€ç™ºå°„ä½“ã‚’ç™ºå°„ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const kShotVelocity = 100; // å˜ä½/ç§’
  const shots = [];
  let shotId = 0;
  function fireShot() {
    const node = new SceneGraphNode(`shot-${shotId++}`);
    node.setParent(root);
    mat4.translate(fingerTip.worldMatrix, [0, 20, 0], node.localMatrix);
    const mesh = addMesh(node, shotVertices, kWhite);
    const velocity = vec3.mulScalar(
      vec3.normalize(vec3.getAxis(fingerTip.worldMatrix, 1)),
      kShotVelocity);
    shots.push({
      node,
      mesh,
      velocity,
      endTime: performance.now() * 0.001 + 5,
    });
    requestRender();
  }
</pre>
<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã€Œã‚·ãƒ§ãƒƒãƒˆã€ã‚’<code class="notranslate" translate="no">shots</code>é…åˆ—ã«è¿½åŠ ã—ã¾ã™ã€‚ã“ã‚Œã«ã¯ã€<code class="notranslate" translate="no">node</code>ã€<code class="notranslate" translate="no">mesh</code>ã€<code class="notranslate" translate="no">velocity</code>ã€<code class="notranslate" translate="no">endTime</code>ãŒå«ã¾ã‚Œã¾ã™ã€‚</p>
<p><code class="notranslate" translate="no">node</code>ã¯Yè»¸ä¸Šã§20å˜ä½å¤–å´ã«é…ç½®ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€å††éŒã®é ‚ç‚¹ã‚’ä½œæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒå…ˆç«¯ã‚’20å˜ä½å¤–å´ã«ä½œæˆã™ã‚‹ãŸã‚ã€è£œæ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚ä»£ã‚ã‚Šã«å††éŒã®é ‚ç‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ã“ã‚Œã¯æ‰‹é–“ãŒã‹ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸğŸ˜…ã€‚ã“ã®ãƒãƒ¼ãƒ‰ã«<code class="notranslate" translate="no">TRS</code>ã‚½ãƒ¼ã‚¹ã‚’è¿½åŠ ã—ã¦ã„ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ãƒ­ãƒ¼ã‚«ãƒ«è¡Œåˆ—ã‚’ç›´æ¥æ›´æ–°ã—ã¾ã™ã€‚</p>
<p><code class="notranslate" translate="no">mesh</code>ã¯ãƒ¡ãƒƒã‚·ãƒ¥ã®é ‚ç‚¹ã§ã™ã€‚ã‚·ãƒ§ãƒƒãƒˆãŒå®Œäº†ã—ãŸã¨ãã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚‚ã®ã®ãƒªã‚¹ãƒˆã‹ã‚‰ã‚·ãƒ§ãƒƒãƒˆã®ãƒ¡ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ã€ã“ã‚ŒãŒå¿…è¦ã§ã™ã€‚</p>
<p><code class="notranslate" translate="no">velocity</code>ã¯ã€ã‚·ãƒ§ãƒƒãƒˆã‚’ç§»å‹•ã™ã‚‹æ–¹å‘ã¨é€Ÿåº¦ã§ã™ã€‚æŒ‡ãŒæŒ‡ã™è»¸ã§ã‚ã‚‹ãŸã‚ã€ç™ºå°„ã™ã‚‹æ–¹å‘ã¨ã—ã¦yè»¸ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«<code class="notranslate" translate="no">vec3.getAxis</code>ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚<a href="webgpu-orthographic-projection.html">3Dæ•°å­¦ã«é–¢ã™ã‚‹è¨˜äº‹</a>ã§èª¬æ˜ã—ãŸã‚ˆã†ã«ã€yè»¸ã¯è¡Œåˆ—ã®2è¡Œç›®ã¾ãŸã¯è¦ç´ 4ã€5ã€6ãªã®ã§ã€<code class="notranslate" translate="no">vec3.getAxis</code>ã¯æ¬¡ã®ã‚ˆã†ã«å®Ÿè£…ã§ãã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const vec3 = {
  ...
+  // 0 = x, 1 = y, 2 = z;
+  getAxis(m, axis, dst) {
+    dst = dst || new Float32Array(3);
+
+    const offset = axis * 4;
+    dst[0] = m[offset + 0];
+    dst[1] = m[offset + 1];
+    dst[2] = m[offset + 2];
+
+    return dst;
+  },
  ...
};
</pre>
<p>ã¾ãŸã¯ã€ã‚³ãƒ¼ãƒ‰ã¯ãã®yè»¸ã‚’å–å¾—ã—ã€ãã®æ–¹å‘ã‚’æ­£è¦åŒ–ã—ã€æ¬¡ã«<code class="notranslate" translate="no">vec3.mulScalar</code>ã‚’ä½¿ç”¨ã—ã¦ç›®çš„ã®é€Ÿåº¦ã«ã—ã¾ã™ã€‚</p>
<p><code class="notranslate" translate="no">vec3.mulScalar</code>ã‚’æä¾›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const vec3 = {
  ...
  mulScalar(a, scale, dst) {
    dst = dst || new Float32Array(3);

    dst[0] = a[0] * scale;
    dst[1] = a[1] * scale;
    dst[2] = a[2] * scale;

    return dst;
  },  ...
};
</pre>
<p>æœ€å¾Œã«ã€<code class="notranslate" translate="no">endTime</code>ã¯ã€ã‚·ãƒ§ãƒƒãƒˆã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã®å°†æ¥ã®ã‚ã‚‹æ™‚ç‚¹ã§ã™ã€‚</p>
<p>ã“ã‚Œã§ã€ç™ºå°„ä½“ã‚’ç§»å‹•ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function processShots(now, deltaTime) {
    if (shots.length &gt; 0) {
      requestRender();
      while (shots.length &amp;&amp; shots[0].endTime &lt;= now) {
        const shot = shots.shift();
        shot.node.setParent(null);
        removeMesh(shot.mesh);
      }
      for (const shot of shots) {
        const v = vec3.mulScalar(shot.velocity, deltaTime);
        mat4.multiply(mat4.translation(v), shot.node.localMatrix, shot.node.localMatrix);
      }
    }
  }
</pre>
<p>ãã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚·ãƒ§ãƒƒãƒˆã®æ™‚é–“ãŒæœŸé™åˆ‡ã‚Œã«ãªã£ãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ãã®å ´åˆã€ã‚·ãƒ§ãƒƒãƒˆã®ãƒãƒ¼ãƒ‰ã‚’ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‹ã‚‰å‰Šé™¤ã—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚‚ã®ã®ãƒªã‚¹ãƒˆã‹ã‚‰ãƒ¡ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>
<p>ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€é…åˆ—å†…ã®å„ã‚·ãƒ§ãƒƒãƒˆã«ã¤ã„ã¦ã€é€Ÿåº¦ã‚’ã‚·ãƒ§ãƒƒãƒˆã®è¡Œåˆ—ã«è¿½åŠ ã—ã€<code class="notranslate" translate="no">deltaTime</code>ã§ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã—ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã«ä¾å­˜ã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<p><code class="notranslate" translate="no">removeMesh</code>ã‚’æä¾›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function removeMesh(mesh) {
    meshes.splice(meshes.indexOf(mesh), 1);
  }
</pre>
<p>æ¬¡ã«ã€ç™ºå°„ã™ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³ã¨ã€ã“ã®å‡¦ç†é–¢æ•°ã‚’å®Ÿéš›ã«å‘¼ã³å‡ºã™ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  const gui = new GUI();
  gui.onChange(requestRender);
  gui.add(settings, 'cameraRotation', cameraRadToDegOptions);
  gui.add(settings, 'animate').onChange(v =&gt; {
    trsFolder.enable(!v);
  });
  gui.add(settings, 'showMeshNodes').onChange(showMeshNodes);
  gui.add(settings, 'showAllTRS').onChange(showTRS);
+  gui.addButton('Fire!', fireShot);

  ...

  function render() {
    ...

-      const isRunning = settings.animate;
+      const isRunning = settings.animate || shots.length;
      const now = performance.now() * 0.001;
      const deltaTime = wasRunning ? now - then : 0;
      then = now;

      if (isRunning) {
        time += deltaTime;
      }
      wasRunning = isRunning;

      if (settings.animate) {
        animate(time);
        updateCurrentNodeGUI();
        requestRender();
      }

+      processShots(now, deltaTime);
  }
</pre>
<p>ã‚·ãƒ§ãƒƒãƒˆãŒã‚ã‚‹å ´åˆã¯ã€å®Ÿè¡Œã—ç¶šã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã€Œç™ºå°„ï¼ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã‚‹ã¨ã€ã‚·ãƒ§ãƒƒãƒˆãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚GUIã¯<code class="notranslate" translate="no">requestRender</code>ã‚‚å‘¼ã³å‡ºã™ãŸã‚ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’é€šéã—ã¦<code class="notranslate" translate="no">processShots</code>ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚<code class="notranslate" translate="no">processShots</code>ã¯ã€ã‚·ãƒ§ãƒƒãƒˆãŒã‚ã‚‹å ´åˆã¯<code class="notranslate" translate="no">requestRender</code>ã‚’å‘¼ã³å‡ºã™ãŸã‚ã€ã™ã¹ã¦ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—ã¯ã€ã™ã¹ã¦ã®ã‚·ãƒ§ãƒƒãƒˆãŒçµ‚äº†ã™ã‚‹ã¾ã§ç¶šè¡Œã•ã‚Œã¾ã™ã€‚</p>
<p></p><div class="webgpu_example_container">
  <div><iframe class="webgpu_example" style=" " src="/webgpu/resources/editor.html?url=/webgpu/lessons/..%2Fwebgpu-scene-graphs-hand-shoot.html"></iframe></div>
  <a class="webgpu_center" href="/webgpu/lessons/../webgpu-scene-graphs-hand-shoot.html" target="_blank">ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ¥ã®ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</a>
</div>

<p></p>
<p>äººå·®ã—æŒ‡ã®1ã¤ã‚’é¸æŠã—ã€å›è»¢xã‚’èª¿æ•´ã—ã¦ã‹ã‚‰ã€ã€Œç™ºå°„ï¼ã€ã‚’æŠ¼ã—ã¾ã™ã€‚ã¾ãŸã¯ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã«ã€Œç™ºå°„ï¼ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p>
<p>ã“ã®è¨˜äº‹ã§ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã¨ã¯ä½•ã‹ã€ãã—ã¦ãã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã‚ã‚‹ç¨‹åº¦ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒå¾—ã‚‰ã‚ŒãŸã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚Unityã€Blenderã€Unrealã€Mayaã€3DSMaxã€Three.jsã¯ã™ã¹ã¦ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã‚Œã‚‰ã¯ã•ã¾ã–ã¾ãªå½¢å¼ã‚’å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸€éƒ¨ã¯ãƒ¡ãƒƒã‚·ãƒ¥ã‚’ã‚°ãƒ©ãƒ•è‡ªä½“ã«å…¥ã‚Œã¦ä¸å‡ä¸€ã«ã—ã¾ã™ãŒã€ä»–ã¯ã‚ˆã‚Šã€Œç´”ç²‹ã€ã§ã€ãã‚Œã‚‰ã‚’åˆ†é›¢ã—ã¾ã™ã€‚ä¸€éƒ¨ã«ã¯ã€ã‹ãªã‚Šè¤‡é›‘ãªã€Œã‚½ãƒ¼ã‚¹ã€ã‚¯ãƒ©ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã‚’æŒã¤ã“ã¨ã¯ã€ä¸€èˆ¬çš„ã«3Dã‚¨ãƒ³ã‚¸ãƒ³ã®å§‹ã¾ã‚Šã§ã™ã€‚ã™ã¹ã¦ã®3Dã‚¨ãƒ³ã‚¸ãƒ³ãŒæŒã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã»ã¨ã‚“ã©ãŒæŒã£ã¦ã„ã¾ã™ã€‚</p>
<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ã‚«ãƒ¡ãƒ©è‡ªä½“ã‚’ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã®å¤–ã«ä¿æŒã—ã¾ã—ãŸãŒã€ã‚«ãƒ¡ãƒ©ãŒã‚°ãƒ©ãƒ•è‡ªä½“ã®ä¸€éƒ¨ã§ã‚ã‚‹ã“ã¨ãŒã‚ˆã‚Šä¸€èˆ¬çš„ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Unityã€Unrealã€Blenderãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§è¤‡æ•°ã®ã‚«ãƒ¡ãƒ©ã‚’è¡¨ç¤ºãŠã‚ˆã³æ“ä½œã§ãã¾ã™ã€‚</p>
<p>ã‚°ãƒ©ãƒ•è‡ªä½“ã«å…¥ã‚Œã‚‹ã“ã¨ã§ã€ã‚«ãƒ¡ãƒ©ã‚’ã‚ã‚‹ãƒãƒ¼ãƒ‰ã®å­ã«ã™ã‚‹ã“ã¨ãŒã§ãã€ã—ãŸãŒã£ã¦ã€ãã®è¦ªã®å½±éŸ¿ã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€è»Šã®é‹è»¢æ‰‹ã®è¦–ç‚¹ã‹ã‚‰ã®ã‚«ãƒ¡ãƒ©ã‚„ã€å›è»¢ã™ã‚‹é˜²çŠ¯ã‚«ãƒ¡ãƒ©ã®ã‚«ãƒ¡ãƒ©ãªã©ã§ã™ã€‚</p>
<p>åŒæ§˜ã«ã€ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•ã¯ã€å¤šãã®3Dã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒæŒã¤ã‚ˆã†ãª3Dãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®å®Ÿè£…ã«å½¹ç«‹ã¡ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ã€ä¸Šè¨˜ã§ä½¿ç”¨ã—ãŸã‚ˆã†ãªåˆ¥ã®GUIã‹ã‚‰ã§ã¯ãªãã€3Dãƒ“ãƒ¥ãƒ¼ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¹³è¡Œç§»å‹•ã€å›è»¢ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã§ãã‚‹UIè¦ç´ ã§ã™ã€‚åˆ¥ã®è¨˜äº‹ã§3Dãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ã¤ã„ã¦èª¬æ˜ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgpu/lessons/webgpu-scene-graphs.html">English
    </option><option value="/webgpu/lessons/es/webgpu-scene-graphs.html">Spanish
    </option><option value="/webgpu/lessons/ja/webgpu-scene-graphs.html" selected="">æ—¥æœ¬èª
    </option><option value="/webgpu/lessons/ko/webgpu-scene-graphs.html">í•œêµ­ì–´
    </option><option value="/webgpu/lessons/ru/webgpu-scene-graphs.html">Ğ ÑƒÑÑĞºĞ¸Ğ¹
    </option><option value="/webgpu/lessons/tr/webgpu-scene-graphs.html">TÃ¼rkÃ§e
    </option><option value="/webgpu/lessons/uk/webgpu-scene-graphs.html">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°
    </option><option value="/webgpu/lessons/zh_cn/webgpu-scene-graphs.html">ç®€ä½“ä¸­æ–‡
</option></select>


        <div id="toc">
          <ul>  <li>åŸºæœ¬</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-fundamentals.html">åŸºæœ¬</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-inter-stage-variables.html">inter-stageå¤‰æ•°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-uniforms.html">ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ </a></li>
<li><a href="/webgpu/lessons/ja/webgpu-storage-buffers.html">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒƒãƒ•ã‚¡</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-vertex-buffers.html">é ‚ç‚¹ãƒãƒƒãƒ•ã‚¡</a></li>
  <li>ãƒ†ã‚¯ã‚¹ãƒãƒ£</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-textures.html">ãƒ†ã‚¯ã‚¹ãƒãƒ£</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-importing-textures.html">ç”»åƒã®èª­ã¿è¾¼ã¿</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-textures-external-video.html">ãƒ“ãƒ‡ã‚ªã®ä½¿ç”¨</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-cube-maps.html">ã‚­ãƒ¥ãƒ¼ãƒ–ãƒãƒƒãƒ—</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-storage-textures.html">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ†ã‚¯ã‚¹ãƒãƒ£</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-multisampling.html">ãƒãƒ«ãƒã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° / MSAA</a></li>
        </ul>
<li><a href="/webgpu/lessons/ja/webgpu-constants.html">å®šæ•°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-memory-layout.html">æ§‹é€ ä½“ã¨ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-transparency.html">é€æ˜åº¦ã¨ãƒ–ãƒ¬ãƒ³ãƒ‡ã‚£ãƒ³ã‚°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-bind-group-layouts.html">ãƒã‚¤ãƒ³ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-copying-data.html">ãƒ‡ãƒ¼ã‚¿ã®ã‚³ãƒ”ãƒ¼</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-limits-and-features.html">ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¨åˆ¶é™</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-timing.html">ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-wgsl.html">WGSL</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-how-it-works.html">ä»•çµ„ã¿</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-compatibility-mode.html">äº’æ›ãƒ¢ãƒ¼ãƒ‰</a></li>
        </ul>
  <li>3Dã®æ•°å­¦</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-translation.html">å¹³è¡Œç§»å‹•</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-rotation.html">å›è»¢</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-scale.html">ã‚¹ã‚±ãƒ¼ãƒ«</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-matrix-math.html">è¡Œåˆ—æ¼”ç®—</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-orthographic-projection.html">æ­£å°„å½±</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-perspective-projection.html">é€è¦–æŠ•å½±</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-cameras.html">ã‚«ãƒ¡ãƒ©</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-matrix-stacks.html">è¡Œåˆ—ã‚¹ã‚¿ãƒƒã‚¯</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-scene-graphs.html">ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•</a></li>
        </ul>
  <li>ãƒ©ã‚¤ãƒˆ</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-lighting-directional.html">æŒ‡å‘æ€§ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-lighting-point.html">ç‚¹å…‰æº</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-lighting-spot.html">ã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆ</a></li>
        </ul>
  <li>ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-large-triangle-to-cover-clip-space.html">å¤§ããªã‚¯ãƒªãƒƒãƒ—ç©ºé–“ã®ä¸‰è§’å½¢</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-environment-maps.html">ç’°å¢ƒãƒãƒƒãƒ—</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-skybox.html">ã‚¹ã‚«ã‚¤ãƒœãƒƒã‚¯ã‚¹</a></li>
        </ul>
  <li>ãƒã‚¹ãƒˆãƒ—ãƒ­ã‚»ãƒƒã‚·ãƒ³ã‚°</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-post-processing.html">åŸºæœ¬çš„ãªCRTã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</a></li>
        </ul>
        </ul>
  <li>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆã‚·ã‚§ãƒ¼ãƒ€</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-compute-shaders.html">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®åŸºæœ¬</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-compute-shaders-histogram.html">ç”»åƒãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ </a></li>
<li><a href="/webgpu/lessons/ja/webgpu-compute-shaders-histogram-part-2.html">ç”»åƒãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ  ãƒ‘ãƒ¼ãƒˆ2</a></li>
        </ul>
  <li>ãã®ä»–ã®ãƒˆãƒ”ãƒƒã‚¯</li>
        <ul>
          <li><a href="/webgpu/lessons/ja/webgpu-resizing-the-canvas.html">Resizing the Canvas</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-multiple-canvases.html">è¤‡æ•°ã®ã‚­ãƒ£ãƒ³ãƒã‚¹</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-points.html">ãƒã‚¤ãƒ³ãƒˆ</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-from-webgl.html">WebGLã‹ã‚‰WebGPUã¸</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-optimization.html">é€Ÿåº¦ã¨æœ€é©åŒ–</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-debugging.html">ãƒ‡ãƒãƒƒã‚°ã¨ã‚¨ãƒ©ãƒ¼</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-resources.html">ãƒªã‚½ãƒ¼ã‚¹ / å‚è€ƒæ–‡çŒ®</a></li>
<li><a href="/webgpu/lessons/ja/webgpu-wgsl-function-reference.html">WGSL é–¢æ•°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a></li>
<li><a href="/webgpu/lessons/resources/wgsl-offset-computer.html">WGSL ã‚ªãƒ•ã‚»ãƒƒãƒˆè¨ˆç®—æ©Ÿ</a></li>
        </ul></ul>
<ul>
  <li><a href="https://github.com/webgpu/webgpufundamentals">github</a></li>
  <li><a href="https://google.github.io/tour-of-wgsl/">Tour of WGSL</a></li>
  <li><a href="https://gpuweb.github.io/types/">WebGPU API Reference</a></li>
  <li><a href="https://www.w3.org/TR/webgpu/">WebGPU Spec</a></li>
  <li><a href="https://www.w3.org/TR/WGSL/">WGSL Spec</a></li>
  <li><a href="https://webgpureport.org">WebGPUReport.org</a></li>
  <li><a href="https://web3dsurvey.com/webgpu">Web3DSurvey.com</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        <div>å•é¡Œç‚¹/ãƒã‚°? <a href="https://github.com/webgpu/webgpufundamentals/issues">githubã§issueã‚’ä½œæˆ</a>.</div>

        <div id="disqus_thread"></div>
        <script>
            var disqus_config = function () {
              this.page.url = `${window.location.origin}${window.location.pathname}`;
              this.page.identifier = `WebGPU ã‚·ãƒ¼ãƒ³ã‚°ãƒ©ãƒ•`;
            };
            (function() { // DON'T EDIT BELOW THIS LINE
                if (window.location.hostname.indexOf("webgpufundamentals.org") < 0) {
                    return;
                }
                var d = document, s = d.createElement('script');
                s.src = 'https://webgpufundamentals-org.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>

<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgpufundamentals",
};
</script>
<script src="/contributors.js"></script>
<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
<script src="/3rdparty/jquery-3.3.1.slim.min.js"></script>
<script src="/webgpu/lessons/resources/prettify.js"></script>
<script src="/webgpu/lessons/resources/lesson.js" type="module"></script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-92BFT5PE4H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-92BFT5PE4H');
</script>






</body></html>